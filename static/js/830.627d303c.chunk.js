"use strict";(self.webpackChunkinfopublishers=self.webpackChunkinfopublishers||[]).push([[830],{5878:(e,o,n)=>{n.d(o,{Z:()=>r});var t=n(2791);const r=()=>{const e=(0,t.useRef)(!0);return(0,t.useEffect)((()=>()=>{e.current=!1}),[]),e}},8393:(e,o,n)=>{n.d(o,{Z:()=>s});var t=n(3767),r=n(890),l=n(3060),a=n(184);const s=()=>(0,a.jsxs)(t.Z,{direction:"row",justifyContent:"space-between",children:[(0,a.jsx)(r.Z,{variant:"subtitle2",component:l.Z,href:"https://berrydashboard.io",target:"_blank",underline:"hover",children:"berrydashboard.io"}),(0,a.jsx)(r.Z,{variant:"subtitle2",component:l.Z,href:"https://codedthemes.com",target:"_blank",underline:"hover",children:"\xa9 codedthemes.com"})]})},5290:(e,o,n)=>{n.d(o,{Z:()=>a});var t=n(4554),r=n(3735),l=n(184);const a=e=>{let{children:o,...n}=e;return(0,l.jsx)(r.Z,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...n,children:(0,l.jsx)(t.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:o})})}},3914:(e,o,n)=>{n.d(o,{Z:()=>t});const t=(0,n(6934).ZP)("div")((e=>{let{theme:o}=e;return{backgroundColor:o.palette.primary.light,minHeight:"100vh"}}))},5830:(e,o,n)=>{n.r(o),n.d(o,{default:()=>V});var t=n(2791),r=n(6871),l=n(3504),a=n(3967),s=n(5193),i=n(1889),c=n(3914),d=n(5290),u=n(9434),m=n(8591),h=n(8096),b=n(4925),p=n(7196),x=n(7071),g=n(4554),f=n(6151),Z=n(1724),j=n(2506),v=n(5878),y=n(2909);n(6914);var S=n(616),w=n(1243),C=n(9704),P=n.n(C),N=n(184);function A(e,o){const n=JSON.stringify(e);return P().AES.encrypt(n,o).toString()}const T=Z.Ry().shape({mobileNumber:Z.Z_().matches(/^\d{10}$/,"Mobile number is not valid").required("Mobile number is required")}),O=Z.Ry().shape({mobileNumber:Z.Z_().matches(/^\d{10}$/,"Mobile number is not valid").required("Mobile number is required"),otp:Z.Z_().matches(/^\d{6}$/,"OTP must be a 6-digit number").required("OTP is required")}),k=t.memo((e=>{let{isLoading:o,handleLoading:n,isOTP:l,handleIsOTP:c,initialValues:d,handleInitialValues:Z,...S}=e;const C=(0,r.s0)(),k=(0,a.Z)(),I=(0,u.I0)(),[E,M]=((0,v.Z)(),(0,s.Z)(k.breakpoints.down("md")),(0,u.v9)((e=>e.customization)),(0,t.useState)(!0)),[V,R]=(0,t.useState)(!1),[B,F]=(0,t.useState)(""),[L,_]=(0,t.useState)(P().lib.WordArray.random(32).toString()),q=(0,t.useCallback)((e=>{c(e)}),[]);(0,t.useEffect)((()=>{console.log(l)}),[l]);const z=(0,t.useCallback)((e=>{Z(e),console.log("handle login OTP values",e),n(!0);fetch("https://2factor.in/API/V1/e6d1f0ea-fa33-11ed-addf-0200cd936042/SMS/+91".concat(e.mobileNumber,"/AUTOGEN2/INFOPU"),{method:"GET",redirect:"follow"}).then((e=>e.text())).then((e=>JSON.parse(e))).then((e=>{console.log(e),"Success"===e.Status?(n(!1),q(!0),console.warn("Success True")):(console.error("login failed"),n(!1))})).catch((e=>console.log("error",e)))}),[]),D=(0,t.useCallback)((async e=>{console.log(e),console.log("handle login OTP values",e),n(!0);let o,t;fetch("https://2factor.in/API/V1/e6d1f0ea-fa33-11ed-addf-0200cd936042/SMS/VERIFY3/+91".concat(e.mobileNumber,"/").concat(e.otp),{method:"GET",redirect:"follow"}).then((e=>e.text())).then((e=>JSON.parse(e))).then((async r=>{if(console.log(r),"Success"===r.Status){if(t=!0,o=r,I(m.P.getUserRole()),!0===t)try{const t=await w.Z.post("".concat("http://127.0.0.1:5000","/common/api/getLoginRole"),{...e},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});let r;if(console.log(t.data),console.log(o,e),"admin"===t.data.role||"school"===t.data.role)r=await A({...t.data.data[0],role:t.data.role},L);else if("student"===t.data.role){const e=t.data.data.reduce(((e,o)=>(Object.keys(o).forEach((n=>{e[n]||(e[n]=new Set),e[n].add(o[n])})),e)),{});Object.keys(e).forEach((o=>{e[o]=Array.from(e[o])})),console.log(e),r=await A({...e,role:t.data.role},L)}await localStorage.setItem("role",t.data.role),await localStorage.setItem("access_role",t.data.role),await localStorage.setItem("access_role_data",r),await localStorage.setItem("key_for_access",L),await I(m.P.setUserRole()),"admin"===t.data.role?C("/dashboard/default"):C("/learn/onlineclasses"),n(!1)}catch(l){n(!1),console.error(l)}}else console.error("login failed"),t=!1,n(!1)})).catch((e=>console.log("error",e)))}),[]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(i.ZP,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:(0,N.jsx)(i.ZP,{item:!0,xs:12,margin:"auto",children:l?(0,N.jsx)(j.J9,{initialValues:d,validationSchema:O,onSubmit:D,children:e=>{let{values:o,handleSubmit:n,handleChange:t,handleBlur:r,touched:l,errors:a}=e;return(0,N.jsxs)(j.l0,{onSubmit:n,children:[(0,N.jsxs)(h.Z,{variant:"outlined",children:[(0,N.jsx)(b.Z,{htmlFor:"outlined-adornment-mobileNumber",children:"Mobile Number"}),(0,N.jsx)(j.gN,{as:p.Z,id:"outlined-adornment-mobileNumber",type:"tel",value:o.mobileNumber,name:"mobileNumber",onBlur:r,onChange:t,label:"Mobile Number",inputProps:{}}),(0,N.jsx)(j.Bc,{name:"mobileNumber",component:x.Z,error:!0,id:"standard-weight-helper-text-mobileNumber"})]}),(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsxs)(h.Z,{variant:"outlined",children:[(0,N.jsx)(b.Z,{htmlFor:"outlined-adornment-otp",children:"OTP"}),(0,N.jsx)(j.gN,{as:p.Z,id:"outlined-adornment-otp",type:"tel",value:o.otp,name:"otp",onBlur:r,onChange:t,label:"OTP",inputProps:{}}),(0,N.jsx)(j.Bc,{name:"otp",component:x.Z,error:!0,id:"standard-weight-helper-text-otp"})]}),(0,N.jsx)(g.Z,{sx:{mt:2},children:(0,N.jsx)(y.Z,{children:(0,N.jsx)(f.Z,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Sign in"})})})]})}}):(0,N.jsx)(j.J9,{initialValues:d,validationSchema:T,onSubmit:z,children:e=>{let{values:o,handleSubmit:n,handleChange:t,handleBlur:r,touched:l,errors:a}=e;return(0,N.jsxs)(j.l0,{onSubmit:n,children:[(0,N.jsxs)(h.Z,{variant:"outlined",children:[(0,N.jsx)(b.Z,{htmlFor:"outlined-adornment-mobileNumber",children:"Mobile Number"}),(0,N.jsx)(j.gN,{as:p.Z,id:"outlined-adornment-mobileNumber",type:"tel",value:o.mobileNumber,name:"mobileNumber",onBlur:r,onChange:t,label:"Mobile Number",inputProps:{}}),(0,N.jsx)(j.Bc,{name:"mobileNumber",component:x.Z,error:!0,id:"standard-weight-helper-text-mobileNumber"})]}),(0,N.jsx)(g.Z,{sx:{mt:2},children:(0,N.jsx)(y.Z,{children:(0,N.jsx)(f.Z,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Get OTP"})})})]})}})})})})}));var I=n(4904),E=(n(8393),n(3379)),M=n(3239);const V=()=>{const e=(0,a.Z)(),o=(0,u.I0)(),n=((0,s.Z)(e.breakpoints.down("md")),(0,r.s0)()),[h,b]=(0,t.useState)(!1),[p,x]=(0,t.useState)(!1),[g,f]=(0,t.useState)({mobileNumber:"",otp:""}),Z=(0,t.useCallback)((e=>{x(e)}),[]);return(0,t.useLayoutEffect)((()=>{b(!0),o(m.P.getUserRole())}),[]),(0,t.useEffect)((()=>{console.log((0,S.getLocalItems)());const e=localStorage.getItem("access_role");e?(b(!1),n("admin"===e?"/dashboard/default":"/learn/onlineclasses")):(b(!1),n("/"))}),[]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:h,children:(0,N.jsx)(M.Z,{color:"inherit"})}),!h&&(0,N.jsx)(c.Z,{children:(0,N.jsx)(i.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:(0,N.jsx)(i.ZP,{item:!0,xs:12,children:(0,N.jsx)(i.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,N.jsx)(i.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,N.jsx)(d.Z,{children:(0,N.jsxs)(i.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,N.jsx)(i.ZP,{item:!0,sx:{mb:3},children:(0,N.jsx)(l.rU,{to:"#",children:(0,N.jsx)(I.Z,{})})}),(0,N.jsx)(i.ZP,{item:!0,xs:12,children:(0,N.jsx)(k,{isLoading:h,handleLoading:e=>{b((e=>!e))},isOTP:p,handleIsOTP:Z,initialValues:g,handleInitialValues:e=>{f((o=>e))}})})]})})})})})})})]})}},3060:(e,o,n)=>{n.d(o,{Z:()=>S});var t=n(3366),r=n(7462),l=n(2791),a=n(8182),s=n(865),i=n(8529),c=n(2065),d=n(4036),u=n(6934),m=n(3736),h=n(8221),b=n(2071),p=n(890),x=n(9076);function g(e){return(0,x.Z)("MuiLink",e)}const f=(0,n(9046).Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var Z=n(184);const j=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"],v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y=(0,u.ZP)(p.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:n}=e;return[o.root,o["underline".concat((0,d.Z)(n.underline))],"button"===n.component&&o.button]}})((e=>{let{theme:o,ownerState:n}=e;const t=(0,i.DW)(o,"palette.".concat((e=>v[e]||e)(n.color)))||n.color;return(0,r.Z)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&{textDecoration:"underline",textDecorationColor:"inherit"!==t?(0,c.Fq)(t,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(f.focusVisible)]:{outline:"auto"}})})),S=l.forwardRef((function(e,o){const n=(0,m.Z)({props:e,name:"MuiLink"}),{className:i,color:c="primary",component:u="a",onBlur:p,onFocus:x,TypographyClasses:f,underline:v="always",variant:S="inherit"}=n,w=(0,t.Z)(n,j),{isFocusVisibleRef:C,onBlur:P,onFocus:N,ref:A}=(0,h.Z)(),[T,O]=l.useState(!1),k=(0,b.Z)(o,A),I=(0,r.Z)({},n,{color:c,component:u,focusVisible:T,underline:v,variant:S}),E=(e=>{const{classes:o,component:n,focusVisible:t,underline:r}=e,l={root:["root","underline".concat((0,d.Z)(r)),"button"===n&&"button",t&&"focusVisible"]};return(0,s.Z)(l,g,o)})(I);return(0,Z.jsx)(y,(0,r.Z)({className:(0,a.Z)(E.root,i),classes:f,color:c,component:u,onBlur:e=>{P(e),!1===C.current&&O(!1),p&&p(e)},onFocus:e=>{N(e),!0===C.current&&O(!0),x&&x(e)},ref:k,ownerState:I,variant:S},w))}))},6914:(e,o,n)=>{n.d(o,{Z:()=>t});n(2791);const t=n.p+"static/media/social-google.9887eb8eb43729cb99f402cfa0de3c44.svg"}}]);
//# sourceMappingURL=830.627d303c.chunk.js.map