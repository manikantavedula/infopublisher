"use strict";(self.webpackChunkinfopublishers=self.webpackChunkinfopublishers||[]).push([[494],{7494:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_e});var l=t(2791),o=t(1889),r=t(7621),n=t(9373),a=t(8550),i=t(9434),d=t(6629),c=t(1243),h=t(3379),u=t(3239),m=t(6934),x=t(9836),p=t(3382),g=t(8745),f=t(618),b=t(9281),j=t(6890),Z=t(5855),C=t(890),v=t(68),y=t(3400),S=t(493),A=t(5021),w=t(6278),E=t(9900),P=t(8956),_=t(184);function T(e){let{name:s}=e;return(0,_.jsx)(C.Z,{display:"block",variant:"h6",fontSize:"16px",fontWeight:400,children:s})}const k=(0,m.ZP)(g.Z)((e=>{let{theme:s}=e;return{["&.".concat(f.Z.head)]:{backgroundColor:"rgb(17, 25, 54)",color:"#fff",padding:"16px"},["&.".concat(f.Z.body)]:{fontSize:14}}})),I=(0,m.ZP)(Z.Z)((e=>{let{theme:s}=e;return{"&:nth-of-type(odd)":{backgroundColor:s.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));function q(e){let{filtereddata:s,onOpenEditModal:t,onOpenDeleteModal:o,onOpenViewModal:r}=e;const[n,a]=(0,l.useState)([]),[i]=(0,l.useState)([{Header:"s.no",accessor:"sno",align:"left"},{Header:"school",accessor:"school",align:"left"},{Header:"series",accessor:"series",align:"left"},{Header:"contact",accessor:"contact",align:"center"},{Header:"action",accessor:"action",align:"center"}]);return(0,l.useEffect)((()=>{console.log(n)}),[n]),(0,l.useEffect)((()=>{let e=[];console.log(s),s&&null!==s&&(e=s.map(((e,s)=>({sno:(0,_.jsx)(C.Z,{color:"text",variant:"h6",fontSize:"16px",fontWeight:400,children:s+1}),school:(0,_.jsx)(T,{name:"".concat(e.name)}),series:(0,_.jsx)(S.Z,{children:e.formatted_series&&e.formatted_series.length>0&&e.formatted_series.map(((e,t)=>(0,_.jsx)(A.ZP,{disablePadding:!0,dense:!0,children:(0,_.jsx)(w.Z,{sx:{paddingLeft:0},children:(0,_.jsx)(E.Z,{primary:e.series_name})})},s+t)))}),contact:(0,_.jsx)(T,{name:"".concat(e.contact)}),action:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v.Z,{title:"View",placement:"top",children:(0,_.jsx)(y.Z,{color:"primary",type:"button",onClick:()=>r(e),children:(0,_.jsx)(P.tCy,{size:"24px"})})}),(0,_.jsx)(v.Z,{title:"Edit",placement:"top",children:(0,_.jsx)(y.Z,{color:"primary",type:"button",onClick:()=>t(e),children:(0,_.jsx)(P.D9l,{size:"24px"})})}),(0,_.jsx)(v.Z,{title:"Delete",placement:"top",children:(0,_.jsx)(y.Z,{color:"primary",type:"button",onClick:()=>o(e),children:(0,_.jsx)(P.IT9,{size:"24px"})})})]})})))),a(e)}),[s]),(0,_.jsx)(b.Z,{children:(0,_.jsxs)(x.Z,{sx:{minWidth:700,boxShadow:"none"},size:"small","aria-label":"customized table",children:[(0,_.jsx)(j.Z,{children:(0,_.jsxs)(Z.Z,{children:[(0,_.jsx)(k,{align:i[0].align,children:"S.No"}),(0,_.jsx)(k,{align:i[1].align,children:"School"}),(0,_.jsx)(k,{align:i[2].align,children:"Series"}),(0,_.jsx)(k,{align:i[3].align,children:"contact"}),(0,_.jsx)(k,{align:i[4].align,children:"Action"})]})}),(0,_.jsx)(p.Z,{children:n&&n.map((e=>(0,_.jsxs)(I,{children:[(0,_.jsx)(k,{component:"th",scope:"row",align:i[0].align,children:e.sno}),(0,_.jsx)(k,{align:i[1].align,children:e.school}),(0,_.jsx)(k,{align:i[2].align,children:e.series}),(0,_.jsx)(k,{align:i[3].align,children:e.contact}),(0,_.jsx)(k,{align:i[4].align,children:e.action})]},e.series)))})]})})}var O=t(1478),M=t(7588),W=t(4970),z=t(3721),B=t(6151),V=t(5289),D=t(7123),L=t(9157),R=t(5661),$=t(4554),H=t(9012),N=t(8096),G=t(4925),F=t(8406),J=t(3786),U=t(7071),X=t(5523),K=t(4454),Q=t(8001),Y=t(5011),ee=t(6739),se=t(2506),te=t(1724);const le=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),oe=(0,m.ZP)((e=>(0,_.jsx)(W.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),re=(0,m.ZP)(z.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}));function ne(e){let{isOpen:s,onClose:t,onCloseEmpty:r,errorEmail:n}=e;const[c,h]=(0,l.useState)([]);(0,l.useEffect)((()=>{console.log(n)}),[n]);const u=te.Ry().shape({distributor:te.Z_().required("Please select an option"),school:te.Z_().required("School is required"),email:te.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").test("email-check","Email Already Exists",(function(e){return e!==n})).required("Email is required"),contact:te.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:te.Z_().required("Address is required")}),m=(0,i.I0)();(0,l.useLayoutEffect)((()=>{m(Q.v.getAll()),m(d.$.getSchoolSeries()),m(Y.R.getAll())}),[]);const x=(0,i.v9)((e=>e.series.data)),p=(0,i.v9)((e=>e.school.dataSchoolSeries)),g=(0,i.v9)((e=>e.distributor.data));(0,l.useEffect)((()=>{console.log(x,p),console.log(x&&x.length>0&&x.map((e=>p&&p.length>0&&p.filter((s=>s.series===e.name)).map((e=>e)))))}),[x,p]);(0,l.useEffect)((()=>{console.log(c)}),[c]),(0,l.useEffect)((()=>{const e=[];x&&x.length>0&&x.forEach((s=>{const t=p&&p.length>0&&p.filter((e=>e.series===s.name));t&&t.length>0&&t.every((e=>c.some((t=>t.standard===e.standard&&t.series===s.name))))&&e.push(...t)})),h(e)}),[x,p]);const f=e=>{const s=p&&p.length>0&&p.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>c.some((t=>t.standard===s.standard&&t.series===e))))),s&&s.length>0&&s.every((s=>c.some((t=>t.standard===s.standard&&t.series===e))))},b=e=>{const s=p&&p.length>0&&p.filter((s=>s.series===e));console.log(s);const t=s&&s.length>0&&s.filter((s=>c.some((t=>t.standard===s.standard&&t.series===e))));return console.log(t),t&&t.length>0&&t.length!==s.length},[j,Z]=(0,l.useState)(!1);return(0,_.jsxs)(V.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"Add School"}),(0,_.jsx)(y.Z,{onClick:r,children:(0,_.jsx)(ee.Z,{})})]})}),(0,_.jsx)(se.J9,{initialValues:{distributor:"",school:"",email:"",contact:"",address:""},validationSchema:u,onSubmit:e=>{console.log(e),(e=>{console.log(e,c),t(e,c)})(e)},children:e=>{let{values:s,handleSubmit:t,errors:l,touched:r,setFieldValue:n}=e;return(0,_.jsxs)(se.l0,{onSubmit:e=>{console.log(e),t(e)},children:[(0,_.jsx)(L.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)(N.Z,{fullWidth:!0,children:[(0,_.jsx)(G.Z,{id:"demo-simple-select-label",children:"Distributor"}),(0,_.jsxs)(F.Z,{labelId:"demo-simple-select-label",id:"demo-simple-distributor",value:s.distributor,label:"Distributor",error:r.distributor&&Boolean(l.distributor),helperText:r.distributor&&l.distributor,onChange:e=>{n("distributor",e.target.value),n("type","")},children:[(0,_.jsx)(J.Z,{value:"",children:(0,_.jsx)("em",{children:"None"})}),g&&g.length>0&&g.map((e=>(0,_.jsx)(J.Z,{value:e.id,children:e.name})))]}),(0,_.jsx)(U.Z,{sx:{color:"red"},children:l.distributor&&r.distributor?l.distributor:""})]})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"school",label:"School",variant:"outlined",error:r.school&&Boolean(l.school),helperText:r.school&&l.school,onChange:e=>{n("school",e.target.value)},fullWidth:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"email",label:"Email",variant:"outlined",error:r.email&&Boolean(l.email),helperText:r.email&&l.email,onChange:e=>{n("email",e.target.value)},fullWidth:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"contact",label:"Contact",variant:"outlined",error:r.contact&&Boolean(l.contact),helperText:r.contact&&l.contact,onChange:e=>{n("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"}})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:"",style:{width:"100%"},error:r.address&&Boolean(l.address),helperText:r.address&&l.address,onChange:e=>{n("address",e.target.value)}})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:x&&x.length>0&&x.map(((e,s)=>{return(0,_.jsxs)(le,{expanded:j==="panelseries".concat(s+1),onChange:(t="panelseries".concat(s+1),(e,s)=>{Z(!!s&&t)}),children:[(0,_.jsx)(oe,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:f(e.name),onChange:()=>(e=>{let s=[...c];const t=s.filter((s=>s.series===e)),l=p.filter((s=>s.series===e));if(t.length<l.length){const t=p.filter((s=>s.series===e));console.log(t),t.forEach((e=>{s.some((s=>s.standard===e.standard&&s.series===e.series))||s.push(e)}))}else p.filter((s=>s.series===e)).forEach((e=>{const t=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1!==t&&s.splice(t,1)}));h(s)})(e.name),indeterminate:b(e.name)}),label:e.name})}),(0,_.jsx)(re,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:p&&p.length>0&&p.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:c.some((t=>t.standard===s.standard&&t.series===e.name)),onChange:()=>(e=>{let s=[...c];const t=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1===t?s.push(e):s.splice(t,1),h(s)})(s)}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var t}))})]})})]})})}),(0,_.jsx)(D.Z,{children:(0,_.jsx)(B.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}const ae=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),ie=(0,m.ZP)((e=>(0,_.jsx)(W.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),de=(0,m.ZP)(z.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),ce=te.Ry().shape({distributor:te.Z_().required("Please select an option"),school:te.Z_().required("School is required"),email:te.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),contact:te.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:te.Z_().required("Address is required")});function he(e){let{isOpen:s,onClose:t,onCloseEmpty:r,editModalData:n}=e;const{name:c,email:h,contact:u,address:m,distributor:x,school_series:p,formatted_series:g}=n,f={school:c,email:h,contact:u,address:m,distributor:x,school_series:p},[b,j]=(0,l.useState)([]),[Z,v]=(0,l.useState)([]),S=(0,i.I0)();(0,l.useLayoutEffect)((()=>{S(Q.v.getAll()),S(Y.R.getAll()),S(d.$.getSchoolSeries())}),[]);const A=(0,i.v9)((e=>e.series.data)),w=(0,i.v9)((e=>e.distributor.data)),E=(0,i.v9)((e=>e.school.dataSchoolSeries));(0,l.useEffect)((()=>{console.log(f)}),[f]),(0,l.useEffect)((()=>{console.log(b)}),[b]),(0,l.useEffect)((()=>{const e=[];g&&g.length>0&&g.forEach((s=>{const{series_id:t,series_name:l,standards:o}=s;o.forEach((s=>{const{standard_id:o,standard_name:r}=s;e.push({series:l,series_id:t,standard:r,standard_id:o})}))})),console.log(e),j(e)}),[g]),(0,l.useEffect)((()=>{console.log(A,E),console.log(A&&A.length>0&&A.map((e=>E&&E.length>0&&E.filter((s=>s.series===e.name)).map((e=>e)))))}),[A,E]),(0,l.useEffect)((()=>{console.log(Z)}),[Z]);const P=e=>{const s=E&&E.length>0&&E.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>b.some((t=>t.standard===s.standard&&t.series===e))))),s&&s.length>0&&s.every((s=>b.some((t=>t.standard===s.standard&&t.series===e))))},T=e=>{const s=E&&E.length>0&&E.filter((s=>s.series===e));console.log(s);const t=s&&s.length>0&&s.filter((s=>b.some((t=>t.standard===s.standard&&t.series===e))));return console.log(t),t&&t.length>0&&t.length!==s.length},[k,I]=(0,l.useState)(!1);return(0,_.jsxs)(V.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"Edit School"}),(0,_.jsx)(y.Z,{onClick:r,children:(0,_.jsx)(ee.Z,{})})]})}),(0,_.jsx)(se.J9,{initialValues:f,validationSchema:ce,onSubmit:e=>{console.log(e),(e=>{console.log(e,b),t(e,b)})(e)},children:e=>{let{values:s,handleSubmit:t,errors:l,touched:r,setFieldValue:n}=e;return(0,_.jsxs)(se.l0,{onSubmit:e=>{console.log(e),t(e)},children:[(0,_.jsx)(L.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)(N.Z,{fullWidth:!0,children:[(0,_.jsx)(G.Z,{id:"demo-simple-select-label",children:"Distributor"}),(0,_.jsxs)(F.Z,{labelId:"demo-simple-select-label",id:"demo-simple-distributor",value:s.distributor,label:"Distributor",error:r.distributor&&Boolean(l.distributor),helperText:r.distributor&&l.distributor,onChange:e=>{n("distributor",e.target.value),n("type","")},children:[(0,_.jsx)(J.Z,{value:"",children:(0,_.jsx)("em",{children:"None"})}),w&&w.length>0&&w.map((e=>(0,_.jsx)(J.Z,{value:e.id,children:e.name})))]}),(0,_.jsx)(U.Z,{sx:{color:"red"},children:l.distributor&&r.distributor?l.distributor:""})]})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"school",label:"School",variant:"outlined",error:r.school&&Boolean(l.school),helperText:r.school&&l.school,onChange:e=>{n("school",e.target.value)},defaultValue:s.school,fullWidth:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"email",label:"Email",variant:"outlined",error:r.email&&Boolean(l.email),helperText:r.email&&l.email,onChange:e=>{n("email",e.target.value)},fullWidth:!0,defaultValue:s.email})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"contact",label:"Contact",variant:"outlined",error:r.contact&&Boolean(l.contact),helperText:r.contact&&l.contact,onChange:e=>{n("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:s.contact})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:s.address,style:{width:"100%"},error:r.address&&Boolean(l.address),helperText:r.address&&l.address,onChange:e=>{n("address",e.target.value)}})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:A&&A.length>0&&A.map(((e,s)=>{return(0,_.jsxs)(ae,{expanded:k==="panelseries".concat(s+1),onChange:(t="panelseries".concat(s+1),(e,s)=>{I(!!s&&t)}),children:[(0,_.jsx)(ie,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:P(e.name),onChange:()=>(e=>{let s=[...b];const t=s.filter((s=>s.series===e)),l=E.filter((s=>s.series===e));if(t.length<l.length){const t=E.filter((s=>s.series===e));console.log(t),t.forEach((e=>{s.some((s=>s.standard===e.standard&&s.series===e.series))||s.push(e)}))}else E.filter((s=>s.series===e)).forEach((e=>{const t=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1!==t&&s.splice(t,1)}));j(s)})(e.name),indeterminate:T(e.name)}),label:e.name})}),(0,_.jsx)(de,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:E&&E.length>0&&E.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:b.some((t=>t.standard===s.standard&&t.series===e.name)),onChange:()=>(e=>{let s=[...b];const t=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1===t?s.push(e):s.splice(t,1),j(s)})(s)}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var t}))})]})})]})})}),(0,_.jsx)(D.Z,{children:(0,_.jsx)(B.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}const ue=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),me=(0,m.ZP)((e=>(0,_.jsx)(W.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),xe=(0,m.ZP)(z.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),pe=te.Ry().shape({school:te.Z_().required("School is required"),email:te.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),contact:te.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:te.Z_().required("Address is required")});function ge(e){let{isOpen:s,onClose:t,onCloseEmpty:r,editModalData:n}=e;const{name:c,email:h,contact:u,address:m,school_series:x,formatted_series:p}=n,g={school:c,email:h,contact:u,address:m,school_series:x},[f,b]=(0,l.useState)([]),[j,Z]=(0,l.useState)([]),v=(0,i.I0)();(0,l.useLayoutEffect)((()=>{v(Q.v.getAll()),v(d.$.getSchoolSeries())}),[]);const S=(0,i.v9)((e=>e.series.data)),A=(0,i.v9)((e=>e.school.dataSchoolSeries));(0,l.useEffect)((()=>{console.log(g)}),[g]),(0,l.useEffect)((()=>{console.log(f)}),[f]),(0,l.useEffect)((()=>{const e=[];p&&p.length>0&&p.forEach((s=>{const{series_id:t,series_name:l,standards:o}=s;o.forEach((s=>{const{standard_id:o,standard_name:r}=s;e.push({series:l,series_id:t,standard:r,standard_id:o})}))})),console.log(e),b(e)}),[p]),(0,l.useEffect)((()=>{console.log(S,A),console.log(S&&S.length>0&&S.map((e=>A&&A.length>0&&A.filter((s=>s.series===e.name)).map((e=>e)))))}),[S,A]),(0,l.useEffect)((()=>{console.log(j)}),[j]);const w=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>f.some((t=>t.standard===s.standard&&t.series===e))))),s&&s.length>0&&s.every((s=>f.some((t=>t.standard===s.standard&&t.series===e))))},E=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));console.log(s);const t=s&&s.length>0&&s.filter((s=>f.some((t=>t.standard===s.standard&&t.series===e))));return console.log(t),t&&t.length>0&&t.length!==s.length},[P,T]=(0,l.useState)(!1);return(0,_.jsxs)(V.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"Confirm Delete School?"}),(0,_.jsx)(y.Z,{onClick:r,children:(0,_.jsx)(ee.Z,{})})]})}),(0,_.jsx)(se.J9,{initialValues:g,validationSchema:pe,onSubmit:e=>{console.log(e),(e=>{console.log(e,f),t(e,f)})(e)},children:e=>{let{values:s,handleSubmit:t,errors:l,touched:r,setFieldValue:n}=e;return(0,_.jsxs)(se.l0,{onSubmit:e=>{console.log(e),t(e)},children:[(0,_.jsx)(L.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"school",label:"School",variant:"outlined",error:r.school&&Boolean(l.school),helperText:r.school&&l.school,onChange:e=>{n("school",e.target.value)},defaultValue:s.school,fullWidth:!0,disabled:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"email",label:"Email",variant:"outlined",error:r.email&&Boolean(l.email),helperText:r.email&&l.email,onChange:e=>{n("email",e.target.value)},fullWidth:!0,defaultValue:s.email,disabled:!0})}),(0,_.jsxs)(o.ZP,{item:!0,xs:6,children:[(0,_.jsx)(a.Z,{name:"contact",label:"Contact",variant:"outlined",error:r.contact&&Boolean(l.contact),helperText:r.contact&&l.contact,onChange:e=>{n("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:s.contact,disabled:!0}),(0,_.jsx)(a.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:s.address,style:{width:"100%"},error:r.address&&Boolean(l.address),helperText:r.address&&l.address,onChange:e=>{n("address",e.target.value)},disabled:!0})]}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:S&&S.length>0&&S.map(((e,s)=>{return(0,_.jsxs)(ue,{expanded:P==="panelseries".concat(s+1),onChange:(t="panelseries".concat(s+1),(e,s)=>{T(!!s&&t)}),children:[(0,_.jsx)(me,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:w(e.name),indeterminate:E(e.name),disabled:!0}),label:e.name})}),(0,_.jsx)(xe,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:A&&A.length>0&&A.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:f.some((t=>t.standard===s.standard&&t.series===e.name)),disabled:!0}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var t}))})]})})]})})}),(0,_.jsx)(D.Z,{children:(0,_.jsx)(B.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}const fe=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),be=(0,m.ZP)((e=>(0,_.jsx)(W.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),je=(0,m.ZP)(z.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),Ze=te.Ry().shape({distributor:te.Z_().required("Distributor is required"),school:te.Z_().required("School is required"),email:te.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),contact:te.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:te.Z_().required("Address is required")});function Ce(e){let{isOpen:s,onClose:t,onCloseEmpty:r,editModalData:n}=e;const{name:c,email:h,contact:u,address:m,distributor:x,school_series:p,formatted_series:g}=n,f={school:c,email:h,contact:u,address:m,distributor:x,school_series:p},[b,j]=(0,l.useState)([]),[Z,v]=(0,l.useState)([]),S=(0,i.I0)();(0,l.useLayoutEffect)((()=>{S(Q.v.getAll()),S(d.$.getSchoolSeries()),S(Y.R.getAll())}),[]);const A=(0,i.v9)((e=>e.series.data)),w=(0,i.v9)((e=>e.school.dataSchoolSeries)),E=(0,i.v9)((e=>e.distributor.data));(0,l.useEffect)((()=>{console.log(f)}),[f]),(0,l.useEffect)((()=>{console.log(b)}),[b]),(0,l.useEffect)((()=>{const e=[];g&&g.length>0&&g.forEach((s=>{const{series_id:t,series_name:l,standards:o}=s;o.forEach((s=>{const{standard_id:o,standard_name:r}=s;e.push({series:l,series_id:t,standard:r,standard_id:o})}))})),console.log(e),j(e)}),[g]),(0,l.useEffect)((()=>{console.log(A,w),console.log(A&&A.length>0&&A.map((e=>w&&w.length>0&&w.filter((s=>s.series===e.name)).map((e=>e)))))}),[A,w]),(0,l.useEffect)((()=>{console.log(Z)}),[Z]);const P=e=>{const s=w&&w.length>0&&w.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>b.some((t=>t.standard===s.standard&&t.series===e))))),s&&s.length>0&&s.every((s=>b.some((t=>t.standard===s.standard&&t.series===e))))},T=e=>{const s=w&&w.length>0&&w.filter((s=>s.series===e));console.log(s);const t=s&&s.length>0&&s.filter((s=>b.some((t=>t.standard===s.standard&&t.series===e))));return console.log(t),t&&t.length>0&&t.length!==s.length},[k,I]=(0,l.useState)(!1);return(0,_.jsxs)(V.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"View School"}),(0,_.jsx)(y.Z,{onClick:r,children:(0,_.jsx)(ee.Z,{})})]})}),(0,_.jsx)(se.J9,{initialValues:f,validationSchema:Ze,children:e=>{let{values:s,errors:t,touched:l,setFieldValue:r}=e;return(0,_.jsx)(se.l0,{children:(0,_.jsx)(L.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)(N.Z,{fullWidth:!0,children:[(0,_.jsx)(G.Z,{id:"demo-simple-select-label",children:"Distributor"}),(0,_.jsxs)(F.Z,{labelId:"demo-simple-select-label",id:"demo-simple-distributor",value:s.distributor,label:"Distributor",error:l.distributor&&Boolean(t.distributor),helperText:l.distributor&&t.distributor,disabled:!0,children:[(0,_.jsx)(J.Z,{value:"",children:(0,_.jsx)("em",{children:"None"})}),E&&E.length>0&&E.map((e=>(0,_.jsx)(J.Z,{value:e.id,children:e.name})))]}),(0,_.jsx)(U.Z,{sx:{color:"red"},children:t.distributor&&l.distributor?t.distributor:""})]})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"school",label:"School",variant:"outlined",error:l.school&&Boolean(t.school),helperText:l.school&&t.school,onChange:e=>{r("school",e.target.value)},defaultValue:s.school,fullWidth:!0,disabled:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"email",label:"Email",variant:"outlined",error:l.email&&Boolean(t.email),helperText:l.email&&t.email,onChange:e=>{r("email",e.target.value)},fullWidth:!0,defaultValue:s.email,disabled:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"contact",label:"Contact",variant:"outlined",error:l.contact&&Boolean(t.contact),helperText:l.contact&&t.contact,onChange:e=>{r("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:s.contact,disabled:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(a.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:s.address,style:{width:"100%"},error:l.address&&Boolean(t.address),helperText:l.address&&t.address,onChange:e=>{r("address",e.target.value)},disabled:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:A&&A.length>0&&A.map(((e,s)=>{return(0,_.jsxs)(fe,{expanded:k==="panelseries".concat(s+1),onChange:(t="panelseries".concat(s+1),(e,s)=>{I(!!s&&t)}),children:[(0,_.jsx)(be,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:P(e.name),indeterminate:T(e.name),disabled:!0}),label:e.name})}),(0,_.jsx)(je,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:w&&w.length>0&&w.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(X.Z,{control:(0,_.jsx)(K.Z,{checked:b.some((t=>t.standard===s.standard&&t.series===e.name)),disabled:!0}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var t}))})]})})]})})})})}})]})}var ve=t(1979),ye=t(1701),Se=t(3967),Ae=t(9504),we=t(4721),Ee=t(9704),Pe=t.n(Ee);(0,ve.Z)({palette:{primary:{main:"#673ab7"},secondary:{main:"rgb(33, 150, 243)"}}});const _e=function(){console.log("In School");const e=(0,Se.Z)(),[s,t]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),[f,b]=(0,l.useState)({}),[j]=(0,n.Ad)(),{darkMode:Z}=j,[S,A]=(0,l.useState)(""),[w,E]=(0,l.useState)(!1),[T,k]=(0,l.useState)(""),I=localStorage.getItem("key_for_access");(function(e,s){const t=Pe().AES.decrypt(e,s).toString(Pe().enc.Utf8);return console.log(t),JSON.parse(t)})(localStorage.getItem("access_role_data"),I).role,(0,l.useEffect)((()=>{}),[]);const O=(0,i.I0)();(0,l.useLayoutEffect)((()=>{O(d.$.getAll())}),[]);const M=(0,i.v9)((e=>e.school.data)),W=(0,l.useMemo)((()=>{if(console.log(S),""===S.trim())return M;return M.filter((e=>e.name.toLowerCase().includes(S.trim().toLowerCase())||e.school_series.join(" ").toLowerCase().includes(S.trim().toLowerCase())))}),[S,M]),z=l.useRef(null),B=(0,l.useCallback)((()=>{t(!0),g("add")})),V=(0,l.useCallback)((e=>{t(!0),g("edit"),b(e)})),D=(0,l.useCallback)((e=>{t(!0),g("view"),b(e)})),L=(0,l.useCallback)((e=>{t(!0),g("delete"),b(e)})),R=(0,l.useCallback)((()=>{t(!1),g(""),b({})}));(0,l.useEffect)((()=>{console.log(T)}),[T]);const $=(0,l.useCallback)((e=>{var s;console.log(e.target.value,z,z.current),null===(s=z.current)||void 0===s||s.focus(),A(e.target.value)}));return(0,_.jsxs)(ye.Z,{theme:e,children:[(0,_.jsx)(h.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:m,children:(0,_.jsx)(u.Z,{color:"inherit"})}),s&&"add"===p?(0,_.jsx)(ne,{isOpen:s,onClose:async(e,s)=>{x(!0),console.log(e,s);try{const l=await c.Z.post("".concat("http://127.0.0.1:5000","/school/submit-form"),{...e,checkedItems:s},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(l.data),"Email already exists"===l.data?k(e.email):(k(""),t(!1),g(""),O(d.$.getAll()))}catch(l){console.error(l)}finally{x(!1)}},onCloseEmpty:R,errorEmail:T}):null,s&&"edit"===p?(0,_.jsx)(he,{isOpen:s,onClose:async(e,s)=>{x(!0),console.log(e,f,s);try{const l=await c.Z.post("".concat("http://127.0.0.1:5000","/school/submit-edit-form"),{...f,...e,checkedItems:s},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(l.data),t(!1),g(""),b({}),O(d.$.getAll())}catch(l){console.error(l)}finally{x(!1)}},onCloseEmpty:R,editModalData:f}):null,s&&"view"===p?(0,_.jsx)(Ce,{isOpen:s,onCloseEmpty:R,editModalData:f}):null,s&&"delete"===p?(0,_.jsx)(ge,{isOpen:s,onClose:async e=>{x(!0),console.log(e,f);try{const s=await c.Z.post("".concat("http://127.0.0.1:5000","/school/submit-delete-form"),{...f,...e},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(s.data),t(!1),g(""),b({}),O(d.$.getAll())}catch(s){console.error(s)}finally{x(!1)}},onCloseEmpty:R,editModalData:f}):null,(0,_.jsx)(o.ZP,{children:(0,_.jsxs)(r.Z,{sx:{boxShadow:"none"},children:[(0,_.jsx)(Ae.Z,{children:(0,_.jsxs)(o.ZP,{variant:"gradient",bgcolor:"info",borderRadius:"lg",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)(C.Z,{variant:"h3",fontWeight:500,color:"primary",children:"School List"}),(0,_.jsxs)(o.ZP,{size:"small",component:"form",sx:{p:"2px 0px",display:"flex",alignItems:"center"},children:[w?(0,_.jsx)(a.Z,{sx:{ml:1,flex:1},size:"small",placeholder:"Search this table...",inputProps:{"aria-label":"search this table..."},autoFocus:!0,value:S,onChange:$,variant:"standard",label:"Search"}):null,(0,_.jsx)(v.Z,{title:"Search...",placement:"top",children:(0,_.jsx)(y.Z,{color:"primary",type:"button","aria-label":"search",onClick:()=>{E((e=>!e))},children:(0,_.jsx)(P.jVj,{size:"24px"})})}),(0,_.jsx)(v.Z,{title:"Add Series",placement:"top",children:(0,_.jsx)(y.Z,{color:"secondary","aria-label":"delete",onClick:B,children:(0,_.jsx)(P.SC9,{size:"27px"})})})]})]})}),(0,_.jsx)(we.Z,{}),(0,_.jsx)(q,{filtereddata:W,onOpenEditModal:V,onOpenDeleteModal:L,onOpenViewModal:D})]})})]})}}}]);
//# sourceMappingURL=494.a6f814e3.chunk.js.map