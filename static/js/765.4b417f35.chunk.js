"use strict";(self.webpackChunkinfopublishers=self.webpackChunkinfopublishers||[]).push([[765],{8393:(e,n,o)=>{o.d(n,{Z:()=>i});var t=o(3767),r=o(890),a=o(3060),l=o(184);const i=()=>(0,l.jsxs)(t.Z,{direction:"row",justifyContent:"space-between",children:[(0,l.jsx)(r.Z,{variant:"subtitle2",component:a.Z,href:"https://berrydashboard.io",target:"_blank",underline:"hover",children:"berrydashboard.io"}),(0,l.jsx)(r.Z,{variant:"subtitle2",component:a.Z,href:"https://codedthemes.com",target:"_blank",underline:"hover",children:"\xa9 codedthemes.com"})]})},5290:(e,n,o)=>{o.d(n,{Z:()=>l});var t=o(4554),r=o(3735),a=o(184);const l=e=>{let{children:n,...o}=e;return(0,a.jsx)(r.Z,{sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1,...o,children:(0,a.jsx)(t.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:n})})}},3914:(e,n,o)=>{o.d(n,{Z:()=>t});const t=(0,o(6934).ZP)("div")((e=>{let{theme:n}=e;return{backgroundColor:n.palette.primary.light,minHeight:"100vh"}}))},765:(e,n,o)=>{o.r(n),o.d(n,{default:()=>L});var t=o(2791),r=o(6871),a=o(3504),l=o(3967),i=o(5193),s=o(1889),c=o(3914),d=o(5290),u=o(9434),m=o(8096),h=o(4925),b=o(7196),p=o(7071),x=o(4554),g=o(6151),f=o(2506),Z=o(2909),j=o(8591),v=o(1243),y=o(9704),S=o.n(y);const w=(e,n)=>{const o=JSON.stringify(e);return S().AES.encrypt(o,n).toString()};var P=o(184);const N=function(e){let{initialValues:n,validationSchemaOTP:o,handleLoading:t,dispatch:r,secretKey:a,navigate:l}=e;return(0,P.jsx)(f.J9,{initialValues:n,validationSchema:o,onSubmit:e=>{((e,n,o,t,r)=>{let a,l;console.log(e),console.log("handle login OTP values",e),n(!0),fetch("https://2factor.in/API/V1/e6d1f0ea-fa33-11ed-addf-0200cd936042/SMS/VERIFY3/+91".concat(e.mobileNumber,"/").concat(e.otp),{method:"GET",redirect:"follow"}).then((e=>e.text())).then((e=>JSON.parse(e))).then((async i=>{if(console.log(i),"Success"===i.Status){if(l=!0,a=i,o(j.P.getUserRole()),!0===l)try{const l=await v.Z.post("".concat("http://127.0.0.1:5000","/common/api/getLoginRole"),{...e},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});let i;if(console.log(l.data),console.log(a,e),"admin"===l.data.role||"school"===l.data.role)i=await w({...l.data.data[0],role:l.data.role},t);else if("student"===l.data.role){const e=l.data.data.reduce(((e,n)=>(Object.keys(n).forEach((o=>{e[o]||(e[o]=new Set),e[o].add(n[o])})),e)),{});Object.keys(e).forEach((n=>{e[n]=Array.from(e[n])})),console.log(e),i=await w({...e,role:l.data.role},t)}await localStorage.setItem("role",l.data.role),await localStorage.setItem("access_role",l.data.role),await localStorage.setItem("access_role_data",i),await localStorage.setItem("key_for_access",t),await o(j.P.setUserRole()),"admin"===l.data.role?r("/dashboard/default"):r("/learn/onlineclasses"),n(!1)}catch(s){n(!1),console.error(s)}}else console.error("login failed"),l=!1,n(!1)})).catch((e=>console.log("error",e)))})(e,t,r,a,l)},children:e=>{let{values:n,handleSubmit:o,handleChange:t,handleBlur:r}=e;return(0,P.jsxs)(f.l0,{onSubmit:o,children:[(0,P.jsxs)(m.Z,{variant:"outlined",children:[(0,P.jsx)(h.Z,{htmlFor:"outlined-adornment-mobileNumber",children:"Mobile Number"}),(0,P.jsx)(f.gN,{as:b.Z,id:"outlined-adornment-mobileNumber",type:"tel",value:n.mobileNumber,name:"mobileNumber",onBlur:r,onChange:t,label:"Mobile Number",inputProps:{}}),(0,P.jsx)(f.Bc,{name:"mobileNumber",component:p.Z,error:!0,id:"standard-weight-helper-text-mobileNumber"})]}),(0,P.jsx)("br",{}),(0,P.jsx)("br",{}),(0,P.jsxs)(m.Z,{variant:"outlined",children:[(0,P.jsx)(h.Z,{htmlFor:"outlined-adornment-otp",children:"OTP"}),(0,P.jsx)(f.gN,{as:b.Z,id:"outlined-adornment-otp",type:"tel",value:n.otp,name:"otp",onBlur:r,onChange:t,label:"OTP",inputProps:{}}),(0,P.jsx)(f.Bc,{name:"otp",component:p.Z,error:!0,id:"standard-weight-helper-text-otp"})]}),(0,P.jsx)(x.Z,{sx:{mt:2},children:(0,P.jsx)(Z.Z,{children:(0,P.jsx)(g.Z,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Sign in"})})})]})}})};const C=function(e){let{initialValues:n,validationSchema:o,handleLoading:t,handleIsOTP:r,handleInitialValues:a}=e;return(0,P.jsx)(f.J9,{initialValues:n,validationSchema:o,onSubmit:e=>{((e,n,o,t)=>{e(n),console.log("handle login OTP values",n),o(!0),fetch("https://2factor.in/API/V1/e6d1f0ea-fa33-11ed-addf-0200cd936042/SMS/+91".concat(n.mobileNumber,"/AUTOGEN2/INFOPBS"),{method:"GET",redirect:"follow"}).then((e=>e.text())).then((e=>JSON.parse(e))).then((e=>{console.log(e),"Success"===e.Status?(o(!1),t(!0),console.warn("Success True")):(console.error("login failed"),o(!1))})).catch((e=>console.log("error",e)))})(a,e,t,r)},children:e=>{let{values:n,handleSubmit:o,handleChange:t,handleBlur:r}=e;return(0,P.jsxs)(f.l0,{onSubmit:o,children:[(0,P.jsxs)(m.Z,{variant:"outlined",children:[(0,P.jsx)(h.Z,{htmlFor:"outlined-adornment-mobileNumber",children:"Mobile Number"}),(0,P.jsx)(f.gN,{as:b.Z,id:"outlined-adornment-mobileNumber",type:"tel",value:n.mobileNumber,name:"mobileNumber",onBlur:r,onChange:t,label:"Mobile Number",inputProps:{}}),(0,P.jsx)(f.Bc,{name:"mobileNumber",component:p.Z,error:!0,id:"standard-weight-helper-text-mobileNumber"})]}),(0,P.jsx)(x.Z,{sx:{mt:2},children:(0,P.jsx)(Z.Z,{children:(0,P.jsx)(g.Z,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Get OTP"})})})]})}})};var A=o(1724);const T=A.Ry().shape({mobileNumber:A.Z_().matches(/^\d{10}$/,"Mobile number is not valid").required("Mobile number is required")}),O=A.Ry().shape({mobileNumber:A.Z_().matches(/^\d{10}$/,"Mobile number is not valid").required("Mobile number is required"),otp:A.Z_().matches(/^\d{6}$/,"OTP must be a 6-digit number").required("OTP is required")}),I=t.memo((e=>{let{isLoading:n,handleLoading:o,...a}=e;const[l,i]=(0,t.useState)(S().lib.WordArray.random(32).toString()),c=(0,r.s0)(),d=(0,u.I0)(),[m,h]=(0,t.useState)(!1),[b,p]=(0,t.useState)({mobileNumber:"",otp:""});(0,t.useEffect)((()=>{console.log(m)}),[m]);return(0,P.jsx)(s.ZP,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:(0,P.jsx)(s.ZP,{item:!0,xs:12,margin:"auto",children:m?(0,P.jsx)(N,{initialValues:b,validationSchemaOTP:O,handleLoading:o,dispatch:d,secretKey:l,navigate:c}):(0,P.jsx)(C,{initialValues:b,handleInitialValues:e=>{p((n=>e))},validationSchema:T,handleLoading:o,handleIsOTP:e=>{console.log(e),h(e)}})})})}));var k=o(4904),M=(o(8393),o(3379)),V=o(3239),E=o(616);const L=()=>{const e=(0,l.Z)(),n=(0,u.I0)(),o=((0,i.Z)(e.breakpoints.down("md")),(0,r.s0)()),[m,h]=(0,t.useState)(!1);return(0,t.useLayoutEffect)((()=>{h(!0),n(j.P.getUserRole())}),[]),(0,t.useEffect)((()=>{console.log((0,E.getLocalItems)());const e=localStorage.getItem("access_role");e?(h(!1),o("admin"===e?"/dashboard/default":"/learn/onlineclasses")):(h(!1),o("/"))}),[]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(M.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:m,children:(0,P.jsx)(V.Z,{color:"inherit"})}),(0,P.jsx)(c.Z,{children:(0,P.jsx)(s.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:(0,P.jsx)(s.ZP,{item:!0,xs:12,children:(0,P.jsx)(s.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,P.jsx)(s.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,P.jsx)(d.Z,{children:(0,P.jsxs)(s.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,P.jsx)(s.ZP,{item:!0,sx:{mb:3},children:(0,P.jsx)(a.rU,{to:"#",children:(0,P.jsx)(k.Z,{})})}),(0,P.jsx)(s.ZP,{item:!0,xs:12,children:(0,P.jsx)(I,{isLoading:m,handleLoading:e=>{h((e=>!e))}})})]})})})})})})})]})}},3060:(e,n,o)=>{o.d(n,{Z:()=>S});var t=o(3366),r=o(7462),a=o(2791),l=o(8182),i=o(865),s=o(8529),c=o(2065),d=o(4036),u=o(6934),m=o(3736),h=o(8221),b=o(2071),p=o(890),x=o(9076);function g(e){return(0,x.Z)("MuiLink",e)}const f=(0,o(9046).Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var Z=o(184);const j=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"],v={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y=(0,u.ZP)(p.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:o}=e;return[n.root,n["underline".concat((0,d.Z)(o.underline))],"button"===o.component&&n.button]}})((e=>{let{theme:n,ownerState:o}=e;const t=(0,s.DW)(n,"palette.".concat((e=>v[e]||e)(o.color)))||o.color;return(0,r.Z)({},"none"===o.underline&&{textDecoration:"none"},"hover"===o.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===o.underline&&{textDecoration:"underline",textDecorationColor:"inherit"!==t?(0,c.Fq)(t,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},"button"===o.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(f.focusVisible)]:{outline:"auto"}})})),S=a.forwardRef((function(e,n){const o=(0,m.Z)({props:e,name:"MuiLink"}),{className:s,color:c="primary",component:u="a",onBlur:p,onFocus:x,TypographyClasses:f,underline:v="always",variant:S="inherit"}=o,w=(0,t.Z)(o,j),{isFocusVisibleRef:P,onBlur:N,onFocus:C,ref:A}=(0,h.Z)(),[T,O]=a.useState(!1),I=(0,b.Z)(n,A),k=(0,r.Z)({},o,{color:c,component:u,focusVisible:T,underline:v,variant:S}),M=(e=>{const{classes:n,component:o,focusVisible:t,underline:r}=e,a={root:["root","underline".concat((0,d.Z)(r)),"button"===o&&"button",t&&"focusVisible"]};return(0,i.Z)(a,g,n)})(k);return(0,Z.jsx)(y,(0,r.Z)({className:(0,l.Z)(M.root,s),classes:f,color:c,component:u,onBlur:e=>{N(e),!1===P.current&&O(!1),p&&p(e)},onFocus:e=>{C(e),!0===P.current&&O(!0),x&&x(e)},ref:I,ownerState:k,variant:S},w))}))}}]);
//# sourceMappingURL=765.4b417f35.chunk.js.map