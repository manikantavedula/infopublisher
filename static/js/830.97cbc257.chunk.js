"use strict";(self.webpackChunkinfopublishers=self.webpackChunkinfopublishers||[]).push([[830],{35878:function(e,n,t){var r=t(72791);n.Z=function(){var e=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},98393:function(e,n,t){var r=t(53767),o=t(20890),i=t(23060),a=t(80184);n.Z=function(){return(0,a.jsxs)(r.Z,{direction:"row",justifyContent:"space-between",children:[(0,a.jsx)(o.Z,{variant:"subtitle2",component:i.Z,href:"https://berrydashboard.io",target:"_blank",underline:"hover",children:"berrydashboard.io"}),(0,a.jsx)(o.Z,{variant:"subtitle2",component:i.Z,href:"https://codedthemes.com",target:"_blank",underline:"hover",children:"\xa9 codedthemes.com"})]})}},45290:function(e,n,t){var r=t(1413),o=t(45987),i=t(64554),a=t(23735),l=t(80184),s=["children"];n.Z=function(e){var n=e.children,t=(0,o.Z)(e,s);return(0,l.jsx)(a.Z,(0,r.Z)((0,r.Z)({sx:{maxWidth:{xs:400,lg:475},margin:{xs:2.5,md:3},"& > *":{flexGrow:1,flexBasis:"50%"}},content:!1},t),{},{children:(0,l.jsx)(i.Z,{sx:{p:{xs:2,sm:3,xl:5}},children:n})}))}},33914:function(e,n,t){var r=(0,t(66934).ZP)("div")((function(e){return{backgroundColor:e.theme.palette.primary.light,minHeight:"100vh"}}));n.Z=r},5830:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var r=t(29439),o=t(72791),i=t(16871),a=t(43504),l=t(13967),s=t(95193),c=t(61889),u=t(33914),d=t(45290),m=t(1413),h=t(74165),f=t(15861),b=t(45987),p=t(59434),x=t(38591),Z=t(68096),g=t(94925),v=t(77196),j=t(47071),y=t(64554),S=t(36151),w=t(77942),P=t(92506),C=t(35878),N=t(52909),k=(t(16914),t(80616)),A=t(31243),T=t(89704),O=t.n(T),I=t(80184),E=["isLoading","handleLoading","isOTP","handleIsOTP","initialValues","handleInitialValues"];function M(e,n){var t=JSON.stringify(e);return O().AES.encrypt(t,n).toString()}var V=w.Ry().shape({mobileNumber:w.Z_().matches(/^\d{10}$/,"Mobile number is not valid").required("Mobile number is required")}),L=w.Ry().shape({mobileNumber:w.Z_().matches(/^\d{10}$/,"Mobile number is not valid").required("Mobile number is required"),otp:w.Z_().matches(/^\d{6}$/,"OTP must be a 6-digit number").required("OTP is required")}),R=o.memo((function(e){e.isLoading;var n=e.handleLoading,t=e.isOTP,a=e.handleIsOTP,u=e.initialValues,d=e.handleInitialValues,w=((0,b.Z)(e,E),(0,i.s0)()),k=(0,l.Z)(),T=(0,p.I0)(),R=((0,C.Z)(),(0,s.Z)(k.breakpoints.down("md")),(0,p.v9)((function(e){return e.customization})),(0,o.useState)(!0)),B=(0,r.Z)(R,2),F=(B[0],B[1],(0,o.useState)(!1)),_=(0,r.Z)(F,2),q=(_[0],_[1],(0,o.useState)("")),z=(0,r.Z)(q,2),D=(z[0],z[1],(0,o.useState)(O().lib.WordArray.random(32).toString())),H=(0,r.Z)(D,2),W=H[0],U=(H[1],(0,o.useCallback)((function(e){a(e)}),[]));(0,o.useEffect)((function(){console.log(t)}),[t]);var G=(0,o.useCallback)((function(e){d(e),console.log("handle login OTP values",e),n(!0);fetch("https://2factor.in/API/V1/e6d1f0ea-fa33-11ed-addf-0200cd936042/SMS/+91".concat(e.mobileNumber,"/AUTOGEN2/INFOPU"),{method:"GET",redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){console.log(e),"Success"===e.Status?(n(!1),U(!0),console.warn("Success True")):(console.error("login failed"),n(!1))})).catch((function(e){return console.log("error",e)}))}),[]),J=(0,o.useCallback)(function(){var e=(0,f.Z)((0,h.Z)().mark((function e(t){var r,o,i;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),console.log("handle login OTP values",t),n(!0),r={method:"GET",redirect:"follow"},fetch("https://2factor.in/API/V1/e6d1f0ea-fa33-11ed-addf-0200cd936042/SMS/VERIFY3/+91".concat(t.mobileNumber,"/").concat(t.otp),r).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then(function(){var e=(0,f.Z)((0,h.Z)().mark((function e(r){var a,l,s;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(r),"Success"!==r.Status){e.next=45;break}if(i=!0,o=r,T(x.P.getUserRole()),!0!==i){e.next=43;break}return e.prev=6,e.next=9,A.Z.post("".concat("https://infopublisher.in:5000","/common/api/getLoginRole"),(0,m.Z)({},t),{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});case 9:if(a=e.sent,console.log(a.data),console.log(o,t),"admin"!==a.data.role&&"school"!==a.data.role){e.next=18;break}return e.next=15,M((0,m.Z)((0,m.Z)({},a.data.data[0]),{},{role:a.data.role}),W);case 15:l=e.sent,e.next=25;break;case 18:if("student"!==a.data.role){e.next=25;break}return s=a.data.data.reduce((function(e,n){return Object.keys(n).forEach((function(t){e[t]||(e[t]=new Set),e[t].add(n[t])})),e}),{}),Object.keys(s).forEach((function(e){s[e]=Array.from(s[e])})),console.log(s),e.next=24,M((0,m.Z)((0,m.Z)({},s),{},{role:a.data.role}),W);case 24:l=e.sent;case 25:return e.next=27,localStorage.setItem("role",a.data.role);case 27:return e.next=29,localStorage.setItem("access_role",a.data.role);case 29:return e.next=31,localStorage.setItem("access_role_data",l);case 31:return e.next=33,localStorage.setItem("key_for_access",W);case 33:return e.next=35,T(x.P.setUserRole());case 35:"admin"===a.data.role?w("/dashboard/default"):w("/learn/onlineclasses"),n(!1),e.next=43;break;case 39:e.prev=39,e.t0=e.catch(6),n(!1),console.error(e.t0);case 43:e.next=48;break;case 45:console.error("login failed"),i=!1,n(!1);case 48:case"end":return e.stop()}}),e,null,[[6,39]])})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.log("error",e)}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.ZP,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:(0,I.jsx)(c.ZP,{item:!0,xs:12,margin:"auto",children:t?(0,I.jsx)(P.J9,{initialValues:u,validationSchema:L,onSubmit:J,children:function(e){var n=e.values,t=e.handleSubmit,r=e.handleChange,o=e.handleBlur;e.touched,e.errors;return(0,I.jsxs)(P.l0,{onSubmit:t,children:[(0,I.jsxs)(Z.Z,{variant:"outlined",children:[(0,I.jsx)(g.Z,{htmlFor:"outlined-adornment-mobileNumber",children:"Mobile Number"}),(0,I.jsx)(P.gN,{as:v.Z,id:"outlined-adornment-mobileNumber",type:"tel",value:n.mobileNumber,name:"mobileNumber",onBlur:o,onChange:r,label:"Mobile Number",inputProps:{}}),(0,I.jsx)(P.Bc,{name:"mobileNumber",component:j.Z,error:!0,id:"standard-weight-helper-text-mobileNumber"})]}),(0,I.jsx)("br",{}),(0,I.jsx)("br",{}),(0,I.jsxs)(Z.Z,{variant:"outlined",children:[(0,I.jsx)(g.Z,{htmlFor:"outlined-adornment-otp",children:"OTP"}),(0,I.jsx)(P.gN,{as:v.Z,id:"outlined-adornment-otp",type:"tel",value:n.otp,name:"otp",onBlur:o,onChange:r,label:"OTP",inputProps:{}}),(0,I.jsx)(P.Bc,{name:"otp",component:j.Z,error:!0,id:"standard-weight-helper-text-otp"})]}),(0,I.jsx)(y.Z,{sx:{mt:2},children:(0,I.jsx)(N.Z,{children:(0,I.jsx)(S.Z,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Sign in"})})})]})}}):(0,I.jsx)(P.J9,{initialValues:u,validationSchema:V,onSubmit:G,children:function(e){var n=e.values,t=e.handleSubmit,r=e.handleChange,o=e.handleBlur;e.touched,e.errors;return(0,I.jsxs)(P.l0,{onSubmit:t,children:[(0,I.jsxs)(Z.Z,{variant:"outlined",children:[(0,I.jsx)(g.Z,{htmlFor:"outlined-adornment-mobileNumber",children:"Mobile Number"}),(0,I.jsx)(P.gN,{as:v.Z,id:"outlined-adornment-mobileNumber",type:"tel",value:n.mobileNumber,name:"mobileNumber",onBlur:o,onChange:r,label:"Mobile Number",inputProps:{}}),(0,I.jsx)(P.Bc,{name:"mobileNumber",component:j.Z,error:!0,id:"standard-weight-helper-text-mobileNumber"})]}),(0,I.jsx)(y.Z,{sx:{mt:2},children:(0,I.jsx)(N.Z,{children:(0,I.jsx)(S.Z,{disableElevation:!0,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Get OTP"})})})]})}})})})})})),B=R,F=t(24904),_=(t(98393),t(83379)),q=t(13239),z=function(){var e=(0,l.Z)(),n=(0,p.I0)(),t=((0,s.Z)(e.breakpoints.down("md")),(0,i.s0)()),m=(0,o.useState)(!1),h=(0,r.Z)(m,2),f=h[0],b=h[1],Z=(0,o.useState)(!1),g=(0,r.Z)(Z,2),v=g[0],j=g[1],y=(0,o.useState)({mobileNumber:"",otp:""}),S=(0,r.Z)(y,2),w=S[0],P=S[1],C=(0,o.useCallback)((function(e){j(e)}),[]);return(0,o.useLayoutEffect)((function(){b(!0),n(x.P.getUserRole())}),[]),(0,o.useEffect)((function(){console.log((0,k.getLocalItems)());var e=localStorage.getItem("access_role");e?(b(!1),t("admin"===e?"/dashboard/default":"/learn/onlineclasses")):(b(!1),t("/"))}),[]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(_.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:f,children:(0,I.jsx)(q.Z,{color:"inherit"})}),!f&&(0,I.jsx)(u.Z,{children:(0,I.jsx)(c.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:(0,I.jsx)(c.ZP,{item:!0,xs:12,children:(0,I.jsx)(c.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,I.jsx)(c.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,I.jsx)(d.Z,{children:(0,I.jsxs)(c.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,I.jsx)(c.ZP,{item:!0,sx:{mb:3},children:(0,I.jsx)(a.rU,{to:"#",children:(0,I.jsx)(F.Z,{})})}),(0,I.jsx)(c.ZP,{item:!0,xs:12,children:(0,I.jsx)(B,{isLoading:f,handleLoading:function(e){b((function(e){return!e}))},isOTP:v,handleIsOTP:C,initialValues:w,handleInitialValues:function(e){P((function(n){return e}))}})})]})})})})})})})]})}},23060:function(e,n,t){t.d(n,{Z:function(){return P}});var r=t(29439),o=t(4942),i=t(63366),a=t(87462),l=t(72791),s=t(28182),c=t(865),u=t(18529),d=t(12065),m=t(14036),h=t(66934),f=t(93736),b=t(68221),p=t(42071),x=t(20890),Z=t(89076);function g(e){return(0,Z.Z)("MuiLink",e)}var v=(0,t(59046).Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),j=t(80184),y=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"],S={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},w=(0,h.ZP)(x.Z,{name:"MuiLink",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n["underline".concat((0,m.Z)(t.underline))],"button"===t.component&&n.button]}})((function(e){var n=e.theme,t=e.ownerState,r=(0,u.DW)(n,"palette.".concat(function(e){return S[e]||e}(t.color)))||t.color;return(0,a.Z)({},"none"===t.underline&&{textDecoration:"none"},"hover"===t.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===t.underline&&{textDecoration:"underline",textDecorationColor:"inherit"!==r?(0,d.Fq)(r,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},"button"===t.component&&(0,o.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(v.focusVisible),{outline:"auto"}))})),P=l.forwardRef((function(e,n){var t=(0,f.Z)({props:e,name:"MuiLink"}),o=t.className,u=t.color,d=void 0===u?"primary":u,h=t.component,x=void 0===h?"a":h,Z=t.onBlur,v=t.onFocus,S=t.TypographyClasses,P=t.underline,C=void 0===P?"always":P,N=t.variant,k=void 0===N?"inherit":N,A=(0,i.Z)(t,y),T=(0,b.Z)(),O=T.isFocusVisibleRef,I=T.onBlur,E=T.onFocus,M=T.ref,V=l.useState(!1),L=(0,r.Z)(V,2),R=L[0],B=L[1],F=(0,p.Z)(n,M),_=(0,a.Z)({},t,{color:d,component:x,focusVisible:R,underline:C,variant:k}),q=function(e){var n=e.classes,t=e.component,r=e.focusVisible,o=e.underline,i={root:["root","underline".concat((0,m.Z)(o)),"button"===t&&"button",r&&"focusVisible"]};return(0,c.Z)(i,g,n)}(_);return(0,j.jsx)(w,(0,a.Z)({className:(0,s.Z)(q.root,o),classes:S,color:d,component:x,onBlur:function(e){I(e),!1===O.current&&B(!1),Z&&Z(e)},onFocus:function(e){E(e),!0===O.current&&B(!0),v&&v(e)},ref:F,ownerState:_,variant:k},A))}))},16914:function(e,n,t){t(72791);n.Z=t.p+"static/media/social-google.9887eb8eb43729cb99f402cfa0de3c44.svg"}}]);
//# sourceMappingURL=830.97cbc257.chunk.js.map