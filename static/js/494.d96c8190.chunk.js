"use strict";(self.webpackChunkinfopublishers=self.webpackChunkinfopublishers||[]).push([[494],{7494:(e,s,l)=>{l.r(s),l.d(s,{default:()=>Se});var n=l(2791),o=l(1889),t=l(7621),a=l(9373),r=l(8550),i=l(9434),c=l(6629),d=l(1243),h=l(3379),u=l(3239),m=l(6934),x=l(9836),p=l(3382),g=l(8745),f=l(618),j=l(9281),Z=l(6890),b=l(5855),C=l(890),y=l(68),S=l(3400),v=l(493),A=l(5021),w=l(6278),E=l(9900),P=l(8956),_=l(184);function k(e){let{name:s}=e;return(0,_.jsx)(C.Z,{display:"block",variant:"h6",fontSize:"16px",fontWeight:400,children:s})}const T=(0,m.ZP)(g.Z)((e=>{let{theme:s}=e;return{["&.".concat(f.Z.head)]:{backgroundColor:"rgb(17, 25, 54)",color:"#fff",padding:"16px"},["&.".concat(f.Z.body)]:{fontSize:14}}})),I=(0,m.ZP)(b.Z)((e=>{let{theme:s}=e;return{"&:nth-of-type(odd)":{backgroundColor:s.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));function q(e){let{filtereddata:s,onOpenEditModal:l,onOpenDeleteModal:o,onOpenViewModal:t}=e;const[a,r]=(0,n.useState)([]),[i]=(0,n.useState)([{Header:"s.no",accessor:"sno",align:"left"},{Header:"school",accessor:"school",align:"left"},{Header:"series",accessor:"series",align:"left"},{Header:"contact",accessor:"contact",align:"center"},{Header:"action",accessor:"action",align:"center"}]);return(0,n.useEffect)((()=>{console.log(a)}),[a]),(0,n.useEffect)((()=>{let e=[];console.log(s),s&&null!==s&&(e=s.map(((e,s)=>({sno:(0,_.jsx)(C.Z,{color:"text",variant:"h6",fontSize:"16px",fontWeight:400,children:s+1}),school:(0,_.jsx)(k,{name:"".concat(e.name)}),series:(0,_.jsx)(v.Z,{children:e.formatted_series&&e.formatted_series.length>0&&e.formatted_series.map(((e,l)=>(0,_.jsx)(A.ZP,{disablePadding:!0,dense:!0,children:(0,_.jsx)(w.Z,{sx:{paddingLeft:0},children:(0,_.jsx)(E.Z,{primary:e.series_name})})},s+l)))}),contact:(0,_.jsx)(k,{name:"".concat(e.contact)}),action:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y.Z,{title:"View",placement:"top",children:(0,_.jsx)(S.Z,{color:"primary",type:"button",onClick:()=>t(e),children:(0,_.jsx)(P.tCy,{size:"24px"})})}),(0,_.jsx)(y.Z,{title:"Edit",placement:"top",children:(0,_.jsx)(S.Z,{color:"primary",type:"button",onClick:()=>l(e),children:(0,_.jsx)(P.D9l,{size:"24px"})})}),(0,_.jsx)(y.Z,{title:"Delete",placement:"top",children:(0,_.jsx)(S.Z,{color:"primary",type:"button",onClick:()=>o(e),children:(0,_.jsx)(P.IT9,{size:"24px"})})})]})})))),r(e)}),[s]),(0,_.jsx)(j.Z,{children:(0,_.jsxs)(x.Z,{sx:{minWidth:700,boxShadow:"none"},size:"small","aria-label":"customized table",children:[(0,_.jsx)(Z.Z,{children:(0,_.jsxs)(b.Z,{children:[(0,_.jsx)(T,{align:i[0].align,children:"S.No"}),(0,_.jsx)(T,{align:i[1].align,children:"School"}),(0,_.jsx)(T,{align:i[2].align,children:"Series"}),(0,_.jsx)(T,{align:i[3].align,children:"contact"}),(0,_.jsx)(T,{align:i[4].align,children:"Action"})]})}),(0,_.jsx)(p.Z,{children:a&&a.map((e=>(0,_.jsxs)(I,{children:[(0,_.jsx)(T,{component:"th",scope:"row",align:i[0].align,children:e.sno}),(0,_.jsx)(T,{align:i[1].align,children:e.school}),(0,_.jsx)(T,{align:i[2].align,children:e.series}),(0,_.jsx)(T,{align:i[3].align,children:e.contact}),(0,_.jsx)(T,{align:i[4].align,children:e.action})]},e.series)))})]})})}var O=l(1478),M=l(7588),z=l(4970),W=l(3721),V=l(6151),B=l(5289),L=l(7123),D=l(9157),R=l(5661),$=l(4554),H=l(9012),G=l(5523),N=l(4454),F=l(8001),J=l(6739),U=l(2506),X=l(1724);const K=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),Q=(0,m.ZP)((e=>(0,_.jsx)(z.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),Y=(0,m.ZP)(W.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}));function ee(e){let{isOpen:s,onClose:l,onCloseEmpty:t,errorEmail:a}=e;const[d,h]=(0,n.useState)([]);(0,n.useEffect)((()=>{console.log(a)}),[a]);const u=X.Ry().shape({school:X.Z_().required("School is required"),email:X.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").test("email-check","Email Already Exists",(function(e){return e!==a})).required("Email is required"),contact:X.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:X.Z_().required("Address is required")}),m=(0,i.I0)();(0,n.useLayoutEffect)((()=>{m(F.v.getAll()),m(c.$.getSchoolSeries())}),[]);const x=(0,i.v9)((e=>e.series.data)),p=(0,i.v9)((e=>e.school.dataSchoolSeries));(0,n.useEffect)((()=>{console.log(x,p),console.log(x&&x.length>0&&x.map((e=>p&&p.length>0&&p.filter((s=>s.series===e.name)).map((e=>e)))))}),[x,p]);(0,n.useEffect)((()=>{console.log(d)}),[d]),(0,n.useEffect)((()=>{const e=[];x&&x.length>0&&x.forEach((s=>{const l=p&&p.length>0&&p.filter((e=>e.series===s.name));l&&l.length>0&&l.every((e=>d.some((l=>l.standard===e.standard&&l.series===s.name))))&&e.push(...l)})),h(e)}),[x,p]);const g=e=>{const s=p&&p.length>0&&p.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>d.some((l=>l.standard===s.standard&&l.series===e))))),s&&s.length>0&&s.every((s=>d.some((l=>l.standard===s.standard&&l.series===e))))},f=e=>{const s=p&&p.length>0&&p.filter((s=>s.series===e));console.log(s);const l=s&&s.length>0&&s.filter((s=>d.some((l=>l.standard===s.standard&&l.series===e))));return console.log(l),l&&l.length>0&&l.length!==s.length},[j,Z]=(0,n.useState)(!1);return(0,_.jsxs)(B.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"Add School"}),(0,_.jsx)(S.Z,{onClick:t,children:(0,_.jsx)(J.Z,{})})]})}),(0,_.jsx)(U.J9,{initialValues:{school:"",email:"",contact:"",address:""},validationSchema:u,onSubmit:e=>{console.log(e),(e=>{console.log(e,d),l(e,d)})(e)},children:e=>{let{handleSubmit:s,errors:l,touched:n,setFieldValue:t}=e;return(0,_.jsxs)(U.l0,{onSubmit:e=>{console.log(e),s(e)},children:[(0,_.jsx)(D.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"school",label:"School",variant:"outlined",error:n.school&&Boolean(l.school),helperText:n.school&&l.school,onChange:e=>{t("school",e.target.value)},fullWidth:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"email",label:"Email",variant:"outlined",error:n.email&&Boolean(l.email),helperText:n.email&&l.email,onChange:e=>{t("email",e.target.value)},fullWidth:!0})}),(0,_.jsxs)(o.ZP,{item:!0,xs:6,children:[(0,_.jsx)(r.Z,{name:"contact",label:"Contact",variant:"outlined",error:n.contact&&Boolean(l.contact),helperText:n.contact&&l.contact,onChange:e=>{t("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"}}),(0,_.jsx)(r.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:"",style:{width:"100%"},error:n.address&&Boolean(l.address),helperText:n.address&&l.address,onChange:e=>{t("address",e.target.value)}})]}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:x&&x.length>0&&x.map(((e,s)=>{return(0,_.jsxs)(K,{expanded:j==="panelseries".concat(s+1),onChange:(l="panelseries".concat(s+1),(e,s)=>{Z(!!s&&l)}),children:[(0,_.jsx)(Q,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:g(e.name),onChange:()=>(e=>{let s=[...d];const l=s.filter((s=>s.series===e)),n=p.filter((s=>s.series===e));if(l.length<n.length){const l=p.filter((s=>s.series===e));console.log(l),l.forEach((e=>{s.some((s=>s.standard===e.standard&&s.series===e.series))||s.push(e)}))}else p.filter((s=>s.series===e)).forEach((e=>{const l=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1!==l&&s.splice(l,1)}));h(s)})(e.name),indeterminate:f(e.name)}),label:e.name})}),(0,_.jsx)(Y,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:p&&p.length>0&&p.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:d.some((l=>l.standard===s.standard&&l.series===e.name)),onChange:()=>(e=>{let s=[...d];const l=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1===l?s.push(e):s.splice(l,1),h(s)})(s)}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var l}))})]})})]})})}),(0,_.jsx)(L.Z,{children:(0,_.jsx)(V.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}const se=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),le=(0,m.ZP)((e=>(0,_.jsx)(z.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),ne=(0,m.ZP)(W.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),oe=X.Ry().shape({school:X.Z_().required("School is required"),email:X.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),contact:X.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:X.Z_().required("Address is required")});function te(e){let{isOpen:s,onClose:l,onCloseEmpty:t,editModalData:a}=e;const{name:d,email:h,contact:u,address:m,school_series:x,formatted_series:p}=a,g={school:d,email:h,contact:u,address:m,school_series:x},[f,j]=(0,n.useState)([]),[Z,b]=(0,n.useState)([]),y=(0,i.I0)();(0,n.useLayoutEffect)((()=>{y(F.v.getAll()),y(c.$.getSchoolSeries())}),[]);const v=(0,i.v9)((e=>e.series.data)),A=(0,i.v9)((e=>e.school.dataSchoolSeries));(0,n.useEffect)((()=>{console.log(g)}),[g]),(0,n.useEffect)((()=>{console.log(f)}),[f]),(0,n.useEffect)((()=>{const e=[];p&&p.length>0&&p.forEach((s=>{const{series_id:l,series_name:n,standards:o}=s;o.forEach((s=>{const{standard_id:o,standard_name:t}=s;e.push({series:n,series_id:l,standard:t,standard_id:o})}))})),console.log(e),j(e)}),[p]),(0,n.useEffect)((()=>{console.log(v,A),console.log(v&&v.length>0&&v.map((e=>A&&A.length>0&&A.filter((s=>s.series===e.name)).map((e=>e)))))}),[v,A]),(0,n.useEffect)((()=>{console.log(Z)}),[Z]);const w=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>f.some((l=>l.standard===s.standard&&l.series===e))))),s&&s.length>0&&s.every((s=>f.some((l=>l.standard===s.standard&&l.series===e))))},E=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));console.log(s);const l=s&&s.length>0&&s.filter((s=>f.some((l=>l.standard===s.standard&&l.series===e))));return console.log(l),l&&l.length>0&&l.length!==s.length},[P,k]=(0,n.useState)(!1);return(0,_.jsxs)(B.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"Edit School"}),(0,_.jsx)(S.Z,{onClick:t,children:(0,_.jsx)(J.Z,{})})]})}),(0,_.jsx)(U.J9,{initialValues:g,validationSchema:oe,onSubmit:e=>{console.log(e),(e=>{console.log(e,f),l(e,f)})(e)},children:e=>{let{values:s,handleSubmit:l,errors:n,touched:t,setFieldValue:a}=e;return(0,_.jsxs)(U.l0,{onSubmit:e=>{console.log(e),l(e)},children:[(0,_.jsx)(D.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"school",label:"School",variant:"outlined",error:t.school&&Boolean(n.school),helperText:t.school&&n.school,onChange:e=>{a("school",e.target.value)},defaultValue:s.school,fullWidth:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"email",label:"Email",variant:"outlined",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,onChange:e=>{a("email",e.target.value)},fullWidth:!0,defaultValue:s.email})}),(0,_.jsxs)(o.ZP,{item:!0,xs:6,children:[(0,_.jsx)(r.Z,{name:"contact",label:"Contact",variant:"outlined",error:t.contact&&Boolean(n.contact),helperText:t.contact&&n.contact,onChange:e=>{a("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:s.contact}),(0,_.jsx)(r.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:s.address,style:{width:"100%"},error:t.address&&Boolean(n.address),helperText:t.address&&n.address,onChange:e=>{a("address",e.target.value)}})]}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:v&&v.length>0&&v.map(((e,s)=>{return(0,_.jsxs)(se,{expanded:P==="panelseries".concat(s+1),onChange:(l="panelseries".concat(s+1),(e,s)=>{k(!!s&&l)}),children:[(0,_.jsx)(le,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:w(e.name),onChange:()=>(e=>{let s=[...f];const l=s.filter((s=>s.series===e)),n=A.filter((s=>s.series===e));if(l.length<n.length){const l=A.filter((s=>s.series===e));console.log(l),l.forEach((e=>{s.some((s=>s.standard===e.standard&&s.series===e.series))||s.push(e)}))}else A.filter((s=>s.series===e)).forEach((e=>{const l=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1!==l&&s.splice(l,1)}));j(s)})(e.name),indeterminate:E(e.name)}),label:e.name})}),(0,_.jsx)(ne,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:A&&A.length>0&&A.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:f.some((l=>l.standard===s.standard&&l.series===e.name)),onChange:()=>(e=>{let s=[...f];const l=s.findIndex((s=>s.standard===e.standard&&s.series===e.series));-1===l?s.push(e):s.splice(l,1),j(s)})(s)}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var l}))})]})})]})})}),(0,_.jsx)(L.Z,{children:(0,_.jsx)(V.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}const ae=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),re=(0,m.ZP)((e=>(0,_.jsx)(z.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),ie=(0,m.ZP)(W.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),ce=X.Ry().shape({school:X.Z_().required("School is required"),email:X.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),contact:X.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:X.Z_().required("Address is required")});function de(e){let{isOpen:s,onClose:l,onCloseEmpty:t,editModalData:a}=e;const{name:d,email:h,contact:u,address:m,school_series:x,formatted_series:p}=a,g={school:d,email:h,contact:u,address:m,school_series:x},[f,j]=(0,n.useState)([]),[Z,b]=(0,n.useState)([]),y=(0,i.I0)();(0,n.useLayoutEffect)((()=>{y(F.v.getAll()),y(c.$.getSchoolSeries())}),[]);const v=(0,i.v9)((e=>e.series.data)),A=(0,i.v9)((e=>e.school.dataSchoolSeries));(0,n.useEffect)((()=>{console.log(g)}),[g]),(0,n.useEffect)((()=>{console.log(f)}),[f]),(0,n.useEffect)((()=>{const e=[];p&&p.length>0&&p.forEach((s=>{const{series_id:l,series_name:n,standards:o}=s;o.forEach((s=>{const{standard_id:o,standard_name:t}=s;e.push({series:n,series_id:l,standard:t,standard_id:o})}))})),console.log(e),j(e)}),[p]),(0,n.useEffect)((()=>{console.log(v,A),console.log(v&&v.length>0&&v.map((e=>A&&A.length>0&&A.filter((s=>s.series===e.name)).map((e=>e)))))}),[v,A]),(0,n.useEffect)((()=>{console.log(Z)}),[Z]);const w=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>f.some((l=>l.standard===s.standard&&l.series===e))))),s&&s.length>0&&s.every((s=>f.some((l=>l.standard===s.standard&&l.series===e))))},E=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));console.log(s);const l=s&&s.length>0&&s.filter((s=>f.some((l=>l.standard===s.standard&&l.series===e))));return console.log(l),l&&l.length>0&&l.length!==s.length},[P,k]=(0,n.useState)(!1);return(0,_.jsxs)(B.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"Confirm Delete School?"}),(0,_.jsx)(S.Z,{onClick:t,children:(0,_.jsx)(J.Z,{})})]})}),(0,_.jsx)(U.J9,{initialValues:g,validationSchema:ce,onSubmit:e=>{console.log(e),(e=>{console.log(e,f),l(e,f)})(e)},children:e=>{let{values:s,handleSubmit:l,errors:n,touched:t,setFieldValue:a}=e;return(0,_.jsxs)(U.l0,{onSubmit:e=>{console.log(e),l(e)},children:[(0,_.jsx)(D.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"school",label:"School",variant:"outlined",error:t.school&&Boolean(n.school),helperText:t.school&&n.school,onChange:e=>{a("school",e.target.value)},defaultValue:s.school,fullWidth:!0,disabled:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"email",label:"Email",variant:"outlined",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,onChange:e=>{a("email",e.target.value)},fullWidth:!0,defaultValue:s.email,disabled:!0})}),(0,_.jsxs)(o.ZP,{item:!0,xs:6,children:[(0,_.jsx)(r.Z,{name:"contact",label:"Contact",variant:"outlined",error:t.contact&&Boolean(n.contact),helperText:t.contact&&n.contact,onChange:e=>{a("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:s.contact,disabled:!0}),(0,_.jsx)(r.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:s.address,style:{width:"100%"},error:t.address&&Boolean(n.address),helperText:t.address&&n.address,onChange:e=>{a("address",e.target.value)},disabled:!0})]}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:v&&v.length>0&&v.map(((e,s)=>{return(0,_.jsxs)(ae,{expanded:P==="panelseries".concat(s+1),onChange:(l="panelseries".concat(s+1),(e,s)=>{k(!!s&&l)}),children:[(0,_.jsx)(re,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:w(e.name),indeterminate:E(e.name),disabled:!0}),label:e.name})}),(0,_.jsx)(ie,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:A&&A.length>0&&A.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:f.some((l=>l.standard===s.standard&&l.series===e.name)),disabled:!0}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var l}))})]})})]})})}),(0,_.jsx)(L.Z,{children:(0,_.jsx)(V.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}const he=(0,m.ZP)((e=>(0,_.jsx)(M.Z,{disableGutters:!0,elevation:0,square:!0,...e})))((e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),ue=(0,m.ZP)((e=>(0,_.jsx)(z.Z,{expandIcon:(0,_.jsx)(O.Z,{sx:{fontSize:"0.9rem"}}),...e})))((e=>{let{theme:s}=e;return{backgroundColor:"dark"===s.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:s.spacing(1)}}})),me=(0,m.ZP)(W.Z)((e=>{let{theme:s}=e;return{padding:s.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),xe=X.Ry().shape({school:X.Z_().required("School is required"),email:X.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),contact:X.Z_().matches(/^\d{10}$/,"Phone number is not valid").required("Phone number is required"),address:X.Z_().required("Address is required")});function pe(e){let{isOpen:s,onClose:l,onCloseEmpty:t,editModalData:a}=e;const{name:d,email:h,contact:u,address:m,school_series:x,formatted_series:p}=a,g={school:d,email:h,contact:u,address:m,school_series:x},[f,j]=(0,n.useState)([]),[Z,b]=(0,n.useState)([]),y=(0,i.I0)();(0,n.useLayoutEffect)((()=>{y(F.v.getAll()),y(c.$.getSchoolSeries())}),[]);const v=(0,i.v9)((e=>e.series.data)),A=(0,i.v9)((e=>e.school.dataSchoolSeries));(0,n.useEffect)((()=>{console.log(g)}),[g]),(0,n.useEffect)((()=>{console.log(f)}),[f]),(0,n.useEffect)((()=>{const e=[];p&&p.length>0&&p.forEach((s=>{const{series_id:l,series_name:n,standards:o}=s;o.forEach((s=>{const{standard_id:o,standard_name:t}=s;e.push({series:n,series_id:l,standard:t,standard_id:o})}))})),console.log(e),j(e)}),[p]),(0,n.useEffect)((()=>{console.log(v,A),console.log(v&&v.length>0&&v.map((e=>A&&A.length>0&&A.filter((s=>s.series===e.name)).map((e=>e)))))}),[v,A]),(0,n.useEffect)((()=>{console.log(Z)}),[Z]);const w=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));return console.log(s,e,s&&s.length>0&&s.every((s=>f.some((l=>l.standard===s.standard&&l.series===e))))),s&&s.length>0&&s.every((s=>f.some((l=>l.standard===s.standard&&l.series===e))))},E=e=>{const s=A&&A.length>0&&A.filter((s=>s.series===e));console.log(s);const l=s&&s.length>0&&s.filter((s=>f.some((l=>l.standard===s.standard&&l.series===e))));return console.log(l),l&&l.length>0&&l.length!==s.length},[P,k]=(0,n.useState)(!1);return(0,_.jsxs)(B.Z,{open:s,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)($.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)($.Z,{padding:"8px",fontSize:18,children:"View School"}),(0,_.jsx)(S.Z,{onClick:t,children:(0,_.jsx)(J.Z,{})})]})}),(0,_.jsx)(U.J9,{initialValues:g,validationSchema:xe,children:e=>{let{values:s,errors:l,touched:n,setFieldValue:t}=e;return(0,_.jsx)(U.l0,{children:(0,_.jsx)(D.Z,{children:(0,_.jsx)(H.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,_.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"school",label:"School",variant:"outlined",error:n.school&&Boolean(l.school),helperText:n.school&&l.school,onChange:e=>{t("school",e.target.value)},defaultValue:s.school,fullWidth:!0,disabled:!0})}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsx)(r.Z,{name:"email",label:"Email",variant:"outlined",error:n.email&&Boolean(l.email),helperText:n.email&&l.email,onChange:e=>{t("email",e.target.value)},fullWidth:!0,defaultValue:s.email,disabled:!0})}),(0,_.jsxs)(o.ZP,{item:!0,xs:6,children:[(0,_.jsx)(r.Z,{name:"contact",label:"Contact",variant:"outlined",error:n.contact&&Boolean(l.contact),helperText:n.contact&&l.contact,onChange:e=>{t("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:s.contact,disabled:!0}),(0,_.jsx)(r.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:s.address,style:{width:"100%"},error:n.address&&Boolean(l.address),helperText:n.address&&l.address,onChange:e=>{t("address",e.target.value)},disabled:!0})]}),(0,_.jsx)(o.ZP,{item:!0,xs:6,children:(0,_.jsxs)($.Z,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#f8fafc"},children:[(0,_.jsx)(C.Z,{sx:{margin:"15.5px 14px"},children:"Class Access"}),(0,_.jsx)(H.Z,{sx:{borderRadius:"13px"},children:v&&v.length>0&&v.map(((e,s)=>{return(0,_.jsxs)(he,{expanded:P==="panelseries".concat(s+1),onChange:(l="panelseries".concat(s+1),(e,s)=>{k(!!s&&l)}),children:[(0,_.jsx)(ue,{"aria-controls":"panelseries".concat(s+1,"d-content"),id:"panelseries".concat(s+1,"d-header"),children:(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:w(e.name),indeterminate:E(e.name),disabled:!0}),label:e.name})}),(0,_.jsx)(me,{sx:{border:"1px solid rgba(0, 0, 0, 0.12)"},children:A&&A.length>0&&A.filter((s=>s.series===e.name)).map((s=>(0,_.jsx)(G.Z,{control:(0,_.jsx)(N.Z,{checked:f.some((l=>l.standard===s.standard&&l.series===e.name)),disabled:!0}),label:s.standard},"".concat(s.standard,"-").concat(s.series))))})]},"panelseries".concat(s+1));var l}))})]})})]})})})})}})]})}var ge=l(1979),fe=l(1701),je=l(3967),Ze=l(9504),be=l(4721),Ce=l(9704),ye=l.n(Ce);(0,ge.Z)({palette:{primary:{main:"#673ab7"},secondary:{main:"rgb(33, 150, 243)"}}});const Se=function(){const e=(0,je.Z)(),[s,l]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[p,g]=(0,n.useState)(""),[f,j]=(0,n.useState)({}),[Z]=(0,a.Ad)(),{darkMode:b}=Z,[v,A]=(0,n.useState)(""),[w,E]=(0,n.useState)(!1),[k,T]=(0,n.useState)(""),I=localStorage.getItem("key_for_access");(function(e,s){const l=ye().AES.decrypt(e,s).toString(ye().enc.Utf8);return console.log(l),JSON.parse(l)})(localStorage.getItem("access_role_data"),I).role,(0,n.useEffect)((()=>{}),[]);const O=(0,i.I0)();(0,n.useLayoutEffect)((()=>{O(c.$.getAll())}),[]);const M=(0,i.v9)((e=>e.school.data)),z=(0,n.useMemo)((()=>{if(console.log(v),""===v.trim())return M;return M.filter((e=>e.name.toLowerCase().includes(v.trim().toLowerCase())||e.school_series.join(" ").toLowerCase().includes(v.trim().toLowerCase())))}),[v,M]),W=n.useRef(null),V=(0,n.useCallback)((()=>{l(!0),g("add")})),B=(0,n.useCallback)((e=>{l(!0),g("edit"),j(e)})),L=(0,n.useCallback)((e=>{l(!0),g("view"),j(e)})),D=(0,n.useCallback)((e=>{l(!0),g("delete"),j(e)})),R=(0,n.useCallback)((()=>{l(!1),g(""),j({})}));(0,n.useEffect)((()=>{console.log(k)}),[k]);const $=(0,n.useCallback)((e=>{var s;console.log(e.target.value,W,W.current),null===(s=W.current)||void 0===s||s.focus(),A(e.target.value)}));return(0,_.jsxs)(fe.Z,{theme:e,children:[(0,_.jsx)(h.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:m,children:(0,_.jsx)(u.Z,{color:"inherit"})}),s&&"add"===p?(0,_.jsx)(ee,{isOpen:s,onClose:async(e,s)=>{x(!0),console.log(e,s);try{const n=await d.Z.post("".concat("https://infopublisher.in:5000","/school/submit-form"),{...e,checkedItems:s},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(n.data),"Email already exists"===n.data?T(e.email):(T(""),l(!1),g(""),O(c.$.getAll()))}catch(n){console.error(n)}finally{x(!1)}},onCloseEmpty:R,errorEmail:k}):null,s&&"edit"===p?(0,_.jsx)(te,{isOpen:s,onClose:async(e,s)=>{x(!0),console.log(e,f,s);try{const n=await d.Z.post("".concat("https://infopublisher.in:5000","/school/submit-edit-form"),{...f,...e,checkedItems:s},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(n.data),l(!1),g(""),j({}),O(c.$.getAll())}catch(n){console.error(n)}finally{x(!1)}},onCloseEmpty:R,editModalData:f}):null,s&&"view"===p?(0,_.jsx)(pe,{isOpen:s,onCloseEmpty:R,editModalData:f}):null,s&&"delete"===p?(0,_.jsx)(de,{isOpen:s,onClose:async e=>{x(!0),console.log(e,f);try{const s=await d.Z.post("".concat("https://infopublisher.in:5000","/school/submit-delete-form"),{...f,...e},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(s.data),l(!1),g(""),j({}),O(c.$.getAll())}catch(s){console.error(s)}finally{x(!1)}},onCloseEmpty:R,editModalData:f}):null,(0,_.jsx)(o.ZP,{children:(0,_.jsxs)(t.Z,{sx:{boxShadow:"none"},children:[(0,_.jsx)(Ze.Z,{children:(0,_.jsxs)(o.ZP,{variant:"gradient",bgcolor:"info",borderRadius:"lg",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)(C.Z,{variant:"h3",fontWeight:500,color:"primary",children:"School List"}),(0,_.jsxs)(o.ZP,{size:"small",component:"form",sx:{p:"2px 0px",display:"flex",alignItems:"center"},children:[w?(0,_.jsx)(r.Z,{sx:{ml:1,flex:1},size:"small",placeholder:"Search this table...",inputProps:{"aria-label":"search this table..."},autoFocus:!0,value:v,onChange:$,variant:"standard",label:"Search"}):null,(0,_.jsx)(y.Z,{title:"Search...",placement:"top",children:(0,_.jsx)(S.Z,{color:"primary",type:"button","aria-label":"search",onClick:()=>{E((e=>!e))},children:(0,_.jsx)(P.jVj,{size:"24px"})})}),(0,_.jsx)(y.Z,{title:"Add Series",placement:"top",children:(0,_.jsx)(S.Z,{color:"secondary","aria-label":"delete",onClick:V,children:(0,_.jsx)(P.SC9,{size:"27px"})})})]})]})}),(0,_.jsx)(be.Z,{}),(0,_.jsx)(q,{filtereddata:z,onOpenEditModal:B,onOpenDeleteModal:D,onOpenViewModal:L})]})})]})}}}]);
//# sourceMappingURL=494.d96c8190.chunk.js.map