"use strict";(self.webpackChunkinfopublishers=self.webpackChunkinfopublishers||[]).push([[969],{1969:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var a=t(4165),r=t(5861),o=t(9439),s=t(1413),c=t(6934),l=t(1478),i=t(7581),d=t(4970),u=t(3721),p=t(4554),f=t(890),h=t(68),m=t(3400),x=(t(1243),t(2791)),Z=t(9434),g=t(1894),v=t(8001),j=t(8591),b=t(1399),y=(t(1065),t(3967)),S=t(4942),C=t(8745),k=t(618),I=t(5855),_=t(184);(0,c.ZP)(C.Z)((function(e){var n;e.theme;return n={},(0,S.Z)(n,"&.".concat(k.Z.head),{backgroundColor:"rgb(17, 25, 54)",color:"#fff",padding:"16px"}),(0,S.Z)(n,"&.".concat(k.Z.body),{fontSize:14}),n})),(0,c.ZP)(I.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));t(3251),t(9747),t(9997),t(2506);var w=t(7942);w.Ry().shape({series:w.Z_().required("Please select an option"),standard:w.Z_().required("Please select an option"),subject:w.Z_().required("Please select an option"),type:w.Z_().required("Please select an option"),onlineClasses:w.Z_().required("OnlineClasses is required")});w.Ry().shape({onlineClasses:w.Z_().required("OnlineClasses is required")});w.Ry().shape({onlineClasses:w.Z_().required("OnlineClasses is required")});w.Ry().shape({onlineClasses:w.Z_().required("OnlineClasses is required")});var q=t(5289),P=t(9157),R=t(5661),N=t(6739),O=t(3980);function A(e){var n=e.isOpen,t=e.onCloseEmpty,a=e.editModalData;return(0,_.jsxs)(q.Z,{open:n,fullWidth:!0,children:[(0,_.jsx)(R.Z,{className:"flex justify-content-between",children:(0,_.jsxs)(p.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsx)(p.Z,{padding:"8px",fontSize:18,children:"".concat(a.lessonIdName," (Part ").concat(a.partNo,") - ").concat(a.name)}),(0,_.jsx)(m.Z,{onClick:t,children:(0,_.jsx)(N.Z,{})})]})}),(0,_.jsx)(P.Z,{children:(0,_.jsx)(O.Z,{videoId:a.liveVideoId})})]})}var D=t(1979),L=t(1701),M=t(8956),V=t(6871),E=t(616);(0,D.Z)({palette:{primary:{main:"#673ab7"},secondary:{main:"rgb(33, 150, 243)"}}});var z=(0,c.ZP)((function(e){return(0,_.jsx)(i.Z,(0,s.Z)({disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var n=e.theme;return{border:"1px solid ".concat(n.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),T=(0,c.ZP)((function(e){return(0,_.jsx)(d.Z,(0,s.Z)({expandIcon:(0,_.jsx)(l.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){var n=e.theme;return{backgroundColor:"dark"===n.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:n.spacing(1)}}})),W=(0,c.ZP)(u.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}}));var B=function(){(0,y.Z)();var e=(0,x.useState)(0),n=(0,o.Z)(e,2),t=(n[0],n[1],V.s0),c=(0,x.useState)(!1),l=(0,o.Z)(c,2),i=l[0],d=l[1],u=(0,x.useState)(!1),S=(0,o.Z)(u,2),C=(S[0],S[1],(0,x.useState)("")),k=(0,o.Z)(C,2),I=k[0],w=k[1],q=(0,x.useState)({}),P=(0,o.Z)(q,2),R=P[0],N=P[1],O=(0,x.useState)(""),D=(0,o.Z)(O,2),B=D[0],F=D[1],G=(0,x.useState)(!1),J=(0,o.Z)(G,2),U=(J[0],J[1],(0,Z.I0)());(0,x.useLayoutEffect)((function(){U(g.F.getAll()),U(v.v.getAll()),U(b.k.getAll()),U(j.P.getUserRole());var e=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token"),o=localStorage.getItem("userinfo_response"),s=localStorage.getItem("expiration_timestamp");if(e&&n&&s&&o&&Date.now()<s)console.log("Auth is working fine.");else if(s&&Date.now()>s&&n){var c;console.log("refresh token for main layout"),(0,r.Z)((0,a.Z)().mark((function e(){var n,r,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.RefreshToken)();case 2:return c=e.sent,e.next=5,U(j.P.storeTokens());case 5:return e.next=7,console.log("refresh token status",c);case 7:"error"===c&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("expiration_timestamp"),localStorage.removeItem("userinfo_response"),n=localStorage.getItem("access_token"),r=localStorage.getItem("refresh_token"),o=localStorage.getItem("expiration_timestamp"),s=localStorage.getItem("userinfo_response"),n&&r&&o&&s&&Date.now()<o||t("/"));case 8:case"end":return e.stop()}}),e)})))()}else t("/")}),[]);var H=(0,Z.v9)((function(e){return e.lesson.data})),K=((0,Z.v9)((function(e){return e.series.data})),(0,Z.v9)((function(e){return e.onlineClasses.data})));(0,x.useEffect)((function(){console.log(K)}),[K]),(0,x.useMemo)((function(){return console.log(B),""===B.trim()?H:H.filter((function(e){return console.log(e,e.name,e.name.toLowerCase(),B),e.name.toLowerCase().includes(B.trim().toLowerCase())}))}),[B,H]);var Q=x.useRef(null),X=((0,x.useCallback)((function(e){var n;console.log(e.target.value,Q,Q.current),null===(n=Q.current)||void 0===n||n.focus(),F(e.target.value)})),(0,x.useState)(!1)),Y=(0,o.Z)(X,2),$=Y[0],ee=Y[1],ne=(0,x.useState)(!1),te=(0,o.Z)(ne,2),ae=te[0],re=te[1],oe=(0,x.useState)(!1),se=(0,o.Z)(oe,2),ce=se[0],le=se[1],ie=(0,x.useState)(!1),de=(0,o.Z)(ie,2),ue=de[0],pe=de[1],fe=(0,x.useState)(!1),he=(0,o.Z)(fe,2),me=he[0],xe=he[1],Ze=function(e){return function(n,t){re(!!t&&e),le(!1),pe(!1),xe(!1)}},ge=function(e){return function(n,t){le(!!t&&e),pe(!1),xe(!1)}},ve=function(e){return function(n,t){pe(!!t&&e),xe(!1)}},je=function(e){return function(n,t){xe(!!t&&e)}};function be(e){var n=null,t=e.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?/]+)/);return t&&(n=t[1]),n}return(0,_.jsxs)(L.Z,{children:[i&&"video"===I?(0,_.jsx)(A,{isOpen:i,onCloseEmpty:function(){d(!1),w(""),N({})},editModalData:R}):null,(0,_.jsx)(p.Z,{sx:{bgcolor:"background.paper",width:"100%"},children:K&&K.length>0&&K.map((function(e,n){return(0,_.jsxs)(z,{expanded:$==="panelseries".concat(n+1),onChange:(t="panelseries".concat(n+1),function(e,n){ee(!!n&&t),re(!1),le(!1),pe(!1),xe(!1)}),children:[(0,_.jsx)(T,{"aria-controls":"panelseries".concat(n+1,"d-content"),id:"panelseries".concat(n+1,"d-header"),children:(0,_.jsx)(f.Z,{children:e.name})}),(0,_.jsx)(W,{children:e.data.length>0&&e.data.map((function(t,a){return(0,_.jsxs)(z,{expanded:ae==="panelstandard".concat(n+a+1),onChange:Ze("panelstandard".concat(n+a+1)),children:[(0,_.jsx)(T,{"aria-controls":"panelstandard".concat(n+a+1,"d-content"),id:"panelstandard".concat(n+a+1,"d-header"),children:(0,_.jsx)(f.Z,{children:t.name})}),(0,_.jsx)(W,{children:t.data.length>0&&t.data.map((function(t,r){return(0,_.jsxs)(z,{expanded:ce==="panelsubject".concat(n+a+r+1),onChange:ge("panelsubject".concat(n+a+r+1)),children:[(0,_.jsx)(T,{"aria-controls":"panelsubject".concat(n+a+r+1,"d-content"),id:"panelsubject".concat(n+a+r+1,"d-header"),children:(0,_.jsx)(f.Z,{children:t.name})}),(0,_.jsx)(W,{children:t.data.length>0&&t.data.map((function(t,o){return(0,_.jsxs)(z,{expanded:ue==="panellesson".concat(n+a+r+o+1),onChange:ve("panellesson".concat(n+a+r+o+1)),children:[(0,_.jsx)(T,{"aria-controls":"panellesson".concat(n+a+r+o+1,"d-content"),id:"panellesson".concat(n+a+r+o+1,"d-header"),children:(0,_.jsx)(f.Z,{children:t.name})}),(0,_.jsx)(W,{children:t.parts.length>0&&t.parts.map((function(c,l){return(0,_.jsxs)(z,{expanded:me==="panelparts".concat(n+a+r+o+l+1),onChange:je("panelparts".concat(n+a+r+o+l+1)),children:[(0,_.jsx)(T,{"aria-controls":"panelparts".concat(n+a+r+o+l+1,"d-content"),id:"panelparts".concat(n+a+r+o+l+1,"d-header"),children:(0,_.jsx)(f.Z,{children:c.name})}),(0,_.jsx)(W,{children:c.liveVideoId?(0,_.jsx)(h.Z,{title:"Live Video",placement:"top",className:c.liveVideoId,children:(0,_.jsx)(m.Z,{color:"primary",type:"button",onClick:function(){return n=(0,s.Z)((0,s.Z)({},e),{},{videoType:"live",lessonIdName:t.name,name:c.name,partNo:c.partNo,liveVideoId:be(c.liveVideoId)}),d(!0),w("video"),void N(n);var n},children:(0,_.jsx)(M.OiJ,{size:"24px"})})}):null})]},"panelparts".concat(n+a+r+o+l+1))}))})]},"panellesson".concat(n+a+r+o+1))}))})]},"panelsubject".concat(n+a+r+1))}))})]},"panelstandard".concat(n+a+1))}))})]},"panelseries".concat(n+1));var t}))})]})}},3980:function(e,n,t){var a=t(2791),r=t(1055),o=(t(6054),t(184));n.Z=function(e){var n=e.videoId,t=(0,a.useRef)();(0,a.useEffect)((function(){t.current&&t.current.plyr&&t.current.plyr.play()}),[]);var s={type:"video",sources:[{src:n,provider:"youtube"}]};return(0,o.jsx)(r.Z,{source:s,ref:t,options:{autoplay:!0}})}}}]);
//# sourceMappingURL=969.26a7b7d5.chunk.js.map