"use strict";(self.webpackChunkinfopublishers=self.webpackChunkinfopublishers||[]).push([[45],{4045:(e,l,s)=>{s.r(l),s.d(l,{default:()=>ae});var t=s(2791),a=s(1889),n=s(7621),r=s(9373),o=s(8550),i=s(9434),d=s(1469),c=s(1243),u=s(3379),m=s(3239),h=s(6934),x=s(9836),g=s(3382),p=s(8745),f=s(618),j=s(9281),Z=s(6890),b=s(5855),C=s(890),y=s(68),S=s(3400),v=s(8956),A=s(184);function w(e){let{name:l}=e;return(0,A.jsx)(C.Z,{display:"block",variant:"h6",fontSize:"16px",fontWeight:400,children:l})}const E=(0,h.ZP)(p.Z)((e=>{let{theme:l}=e;return{["&.".concat(f.Z.head)]:{backgroundColor:"rgb(17, 25, 54)",color:"#fff",padding:"16px"},["&.".concat(f.Z.body)]:{fontSize:14}}})),q=(0,h.ZP)(b.Z)((e=>{let{theme:l}=e;return{"&:nth-of-type(odd)":{backgroundColor:l.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));function _(e){let{filtereddata:l,onOpenEditModal:s,onOpenDeleteModal:a,onOpenViewModal:n}=e;const[r,o]=(0,t.useState)([]),[i]=(0,t.useState)([{Header:"s.no",accessor:"sno",align:"left"},{Header:"student name",accessor:"student name",align:"left"},{Header:"series",accessor:"series",align:"left"},{Header:"standard",accessor:"standard",align:"left"},{Header:"contact",accessor:"contact",align:"center"},{Header:"action",accessor:"action",align:"center"}]);return(0,t.useEffect)((()=>{console.log(r)}),[r]),(0,t.useEffect)((()=>{let e=[];console.log(l),l&&null!==l&&(e=l.map(((e,l)=>({sno:(0,A.jsx)(C.Z,{color:"text",variant:"h6",fontSize:"16px",fontWeight:400,children:l+1}),student:(0,A.jsx)(w,{name:"".concat(e.name)}),series:(0,A.jsx)(w,{name:"".concat(e.series)}),standard:(0,A.jsx)(w,{name:"".concat(e.standard)}),contact:(0,A.jsx)(w,{name:"".concat(e.contact)}),action:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(y.Z,{title:"View",placement:"top",children:(0,A.jsx)(S.Z,{color:"primary",type:"button",onClick:()=>n(e),children:(0,A.jsx)(v.tCy,{size:"24px"})})}),(0,A.jsx)(y.Z,{title:"Edit",placement:"top",children:(0,A.jsx)(S.Z,{color:"primary",type:"button",onClick:()=>s(e),children:(0,A.jsx)(v.D9l,{size:"24px"})})}),(0,A.jsx)(y.Z,{title:"Delete",placement:"top",children:(0,A.jsx)(S.Z,{color:"primary",type:"button",onClick:()=>a(e),children:(0,A.jsx)(v.IT9,{size:"24px"})})})]})})))),o(e)}),[l]),(0,A.jsx)(j.Z,{children:(0,A.jsxs)(x.Z,{sx:{minWidth:700,boxShadow:"none"},size:"small","aria-label":"customized table",children:[(0,A.jsx)(Z.Z,{children:(0,A.jsxs)(b.Z,{children:[(0,A.jsx)(E,{align:i[0].align,children:"S.No"}),(0,A.jsx)(E,{align:i[1].align,children:"Student"}),(0,A.jsx)(E,{align:i[2].align,children:"Series"}),(0,A.jsx)(E,{align:i[3].align,children:"Contact"}),(0,A.jsx)(E,{align:i[4].align,children:"Action"})]})}),(0,A.jsx)(g.Z,{children:r&&r.map(((e,l)=>(0,A.jsxs)(q,{children:[(0,A.jsx)(E,{component:"th",scope:"row",align:i[0].align,children:e.sno}),(0,A.jsx)(E,{align:i[1].align,children:e.student}),(0,A.jsx)(E,{align:i[2].align,children:e.series}),(0,A.jsx)(E,{align:i[3].align,children:e.contact}),(0,A.jsx)(E,{align:i[4].align,children:e.action})]},l)))})]})})}var P=s(6151),O=s(5289),T=s(7123),I=s(9157),N=s(5661),B=s(4554),k=s(9012),W=s(7071),z=s(8096),V=s(4925),L=s(8406),M=s(3786),D=s(8001),R=s(3251),H=s(6739),$=s(2506),J=s(1724),U=s(9704),G=s.n(U);function F(e){let{isOpen:l,onClose:s,onCloseEmpty:n,errorContact:r}=e;const[d,c]=(0,t.useState)([]),[u,m]=(0,t.useState)([]),[h,x]=(0,t.useState)([]),g=(0,i.I0)();(0,t.useLayoutEffect)((()=>{g(D.v.getAll()),g(R.$.getAll())}),[]);const p=(0,i.v9)((e=>e.series.data)),f=(0,i.v9)((e=>e.standard.data)),j=localStorage.getItem("key_for_access"),Z=function(e,l){const s=G().AES.decrypt(e,l).toString(G().enc.Utf8);return console.log(s),JSON.parse(s)}(localStorage.getItem("access_role_data"),j);(0,t.useEffect)((()=>{console.log(d)}),[d]),(0,t.useEffect)((()=>{console.log(u)}),[u]),(0,t.useEffect)((()=>{console.log(p),console.log(Z);const e=Z.school_series,l=[...new Set(e.split(", ").map((e=>Number(e.split("|-|")[0]))))];console.log(l),c(p&&p.length>0&&p.filter((e=>l.includes(e.id))))}),[p]),(0,t.useEffect)((()=>{console.log(f),console.log(Z);const e=Z.school_series,l=[...new Set(e.split(", ").map((e=>Number(e.split("|-|")[1]))))];console.log(l),m(f&&f.length>0&&f.filter((e=>l.includes(e.id))))}),[f]),(0,t.useEffect)((()=>{console.log(r)}),[r]);const b=J.Ry().shape({name:J.Z_().required("Name is required"),series:J.Z_().required("Series is required"),standard:J.Z_().required("Standard is required"),contact:J.Z_().matches(/^\d{10}$/,"Phone number is not valid").test("contact-check","Contact Already Exists",(async function(e){return e!==r})).required("Phone number is required"),email:J.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),address:J.Z_().required("Address is required"),series:J.Ry().required("Series is required"),standard:J.Ry().required("Standard is required")}),C={name:"",email:"",contact:"",series:"",standard:"",address:"",student_school:{},created_by:Z.id},y=(e,l)=>{const s=e.target.value;l("series",s);const t=(e=>{console.log(e),console.log(Z);const l=Z.school_series,s=[...new Set(l.split(", ").map((e=>e.split("|-|"))).filter((l=>Number(l[0])===e.id)).map((e=>Number(e[1]))))];return console.log(s),f&&f.length>0&&f.filter((e=>s.includes(e.id)))})(s);console.log(t),x(t),l("standard","")};return(0,A.jsxs)(O.Z,{open:l,fullWidth:!0,children:[(0,A.jsx)(N.Z,{className:"flex justify-content-between",children:(0,A.jsxs)(B.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,A.jsx)(B.Z,{padding:"8px",fontSize:18,children:"Add Student"}),(0,A.jsx)(S.Z,{onClick:n,children:(0,A.jsx)(H.Z,{})})]})}),(0,A.jsx)($.J9,{initialValues:C,validationSchema:b,onSubmit:e=>{console.log(e),(e=>{console.log(e),s(e)})(e)},children:e=>{let{values:l,handleSubmit:s,errors:t,touched:n,setFieldValue:i}=e;return(0,A.jsxs)($.l0,{onSubmit:e=>{console.log(e),s(e)},children:[(0,A.jsx)(I.Z,{children:(0,A.jsx)(k.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,A.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"name",label:"Name",variant:"outlined",error:n.name&&Boolean(t.name),helperText:n.name&&t.name,onChange:e=>{i("name",e.target.value)},fullWidth:!0})}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"email",label:"Email",variant:"outlined",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,onChange:e=>{i("email",e.target.value)},fullWidth:!0})}),(0,A.jsxs)(a.ZP,{item:!0,xs:6,children:[(0,A.jsx)(W.Z,{sx:{color:"red"},children:r&&"Contact Already Exists"}),(0,A.jsx)(o.Z,{name:"contact",label:"Contact",variant:"outlined",error:n.contact&&Boolean(t.contact),helperText:n.contact&&t.contact,onChange:e=>{i("contact",e.target.value)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"}}),d&&null!==d&&d.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Series"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-series",value:l.series,label:"Series",error:n.series&&Boolean(t.series),helperText:n.series&&t.series,onChange:e=>y(e,i),sx:{marginBottom:"16px"},children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),d&&d.length>0&&d.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:t.series&&n.series?t.series:""})]}),h&&null!==h&&h.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Standard"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-standard",value:l.standard,label:"Standard",error:n.standard&&Boolean(t.standard),helperText:n.standard&&t.standard,onChange:e=>{i("standard",e.target.value)},sx:{marginBottom:"16px"},children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),h&&h.length>0&&h.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:t.standard&&n.standard?t.standard:""})]})]}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",defaultValue:"",style:{width:"100%"},error:n.address&&Boolean(t.address),helperText:n.address&&t.address,onChange:e=>{i("address",e.target.value)}})})]})})}),(0,A.jsx)(T.Z,{children:(0,A.jsx)(P.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}function X(e){let{isOpen:l,onClose:s,onCloseEmpty:n,errorContact:r,editModalData:d}=e;const[c,u]=(0,t.useState)([]),[m,h]=(0,t.useState)([]),[x,g]=(0,t.useState)([]),p=(0,i.I0)();(0,t.useLayoutEffect)((()=>{p(D.v.getAll()),p(R.$.getAll()),console.log(d)}),[]);const f=(0,i.v9)((e=>e.series.data)),j=(0,i.v9)((e=>e.standard.data)),{name:Z,email:b,contact:C,series:y,standard:v,address:w}=d;let E={name:Z,email:b,contact:C,series:f&&f.length>0&&f.filter((e=>e.name===y))[0],standard:j&&j.length>0&&j.filter((e=>e.name===v))[0],address:w};console.log(E);const q=localStorage.getItem("key_for_access"),_=function(e,l){const s=G().AES.decrypt(e,l).toString(G().enc.Utf8);return console.log(s),JSON.parse(s)}(localStorage.getItem("access_role_data"),q);(0,t.useEffect)((()=>{console.log(c)}),[c]),(0,t.useEffect)((()=>{console.log(m)}),[m]),(0,t.useEffect)((()=>{console.log(f);const e=_.school_series,l=[...new Set(e.split(", ").map((e=>Number(e.split("|-|")[0]))))];u(f&&f.length>0&&f.filter((e=>l.includes(e.id))))}),[f]),(0,t.useEffect)((()=>{console.log(j),console.log(_);const e=_.school_series,l=[...new Set(e.split(", ").map((e=>Number(e.split("|-|")[1]))))];console.log(l),h(j&&j.length>0&&j.filter((e=>l.includes(e.id)))),g(j&&j.length>0&&j.filter((e=>l.includes(e.id))))}),[j]),(0,t.useEffect)((()=>{console.log(j),f&&f.length>0&&j&&j.length>0&&(E={name:Z,email:b,contact:C,series:f.filter((e=>e.name===y))[0],standard:j.filter((e=>e.name===v))[0],address:w})}),[f,j]),(0,t.useEffect)((()=>{console.log(r)}),[r]);const U=J.Ry().shape({name:J.Z_().required("Name is required"),series:J.Z_().required("Series is required"),standard:J.Z_().required("Standard is required"),contact:J.Z_().matches(/^\d{10}$/,"Phone number is not valid").test("contact-check","Contact Already Exists",(async function(e){return e!==r})).required("Phone number is required"),email:J.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),address:J.Z_().required("Address is required"),series:J.Ry().required("Series is required"),standard:J.Ry().required("Standard is required")}),F=(e,l)=>{const s=e.target.value;l("series",s);const t=(e=>{console.log(e),console.log(_);const l=_.school_series,s=[...new Set(l.split(", ").map((e=>e.split("|-|"))).filter((l=>Number(l[0])===e.id)).map((e=>Number(e[1]))))];return console.log(s),j&&j.length>0&&j.filter((e=>s.includes(e.id)))})(s);console.log(t),g(t),l("standard","")};return(0,A.jsxs)(O.Z,{open:l,fullWidth:!0,children:[(0,A.jsx)(N.Z,{className:"flex justify-content-between",children:(0,A.jsxs)(B.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,A.jsx)(B.Z,{padding:"8px",fontSize:18,children:"Edit Student"}),(0,A.jsx)(S.Z,{onClick:n,children:(0,A.jsx)(H.Z,{})})]})}),f&&j&&c&&f.length>0&&j.length>0&&c.length>0&&(0,A.jsx)($.J9,{initialValues:E,validationSchema:U,onSubmit:e=>{console.log(e),(e=>{console.log(e),s(e)})(e)},children:e=>{let{values:l,handleSubmit:s,errors:t,touched:n,setFieldValue:i}=e;return(0,A.jsxs)($.l0,{onSubmit:e=>{console.log(e),s(e)},children:[(0,A.jsx)(I.Z,{children:(0,A.jsx)(k.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,A.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"name",label:"Name",variant:"outlined",error:n.name&&Boolean(t.name),helperText:n.name&&t.name,onChange:e=>{i("name",e.target.value)},fullWidth:!0,defaultValue:l.name})}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"email",label:"Email",variant:"outlined",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,onChange:e=>{i("email",e.target.value)},fullWidth:!0,defaultValue:l.email})}),(0,A.jsxs)(a.ZP,{item:!0,xs:6,children:[(0,A.jsx)(W.Z,{sx:{color:"red"},children:r&&"Contact Already Exists"}),(0,A.jsx)(o.Z,{name:"contact",label:"Contact",variant:"outlined",error:n.contact&&Boolean(t.contact),helperText:n.contact&&t.contact,onChange:e=>{i("contact",e.target.value),console.log(l)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:l.contact}),c&&null!==c&&c.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Series"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-series",label:"Series",error:n.series&&Boolean(t.series),helperText:n.series&&t.series,onChange:e=>F(e,i),sx:{marginBottom:"16px"},value:c.filter((e=>e.name===l.series.name))[0],children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),c&&c.length>0&&c.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:t.series&&n.series?t.series:""})]}),x&&null!==x&&x.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Standard"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-standard",label:"Standard",error:n.standard&&Boolean(t.standard),helperText:n.standard&&t.standard,onChange:e=>{i("standard",e.target.value)},sx:{marginBottom:"16px"},value:x.filter((e=>e.name===l.standard.name))[0],children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),x&&x.length>0&&x.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:t.standard&&n.standard?t.standard:""})]})]}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",style:{width:"100%"},error:n.address&&Boolean(t.address),helperText:n.address&&t.address,onChange:e=>{i("address",e.target.value)},defaultValue:l.address})})]})})}),(0,A.jsx)(T.Z,{children:(0,A.jsx)(P.Z,{type:"submit",color:"primary",children:"Submit"})})]})}})]})}function K(e){let{isOpen:l,onClose:s,onCloseEmpty:n,errorContact:r,editModalData:d}=e;const[c,u]=(0,t.useState)([]),m=(0,i.I0)();(0,t.useLayoutEffect)((()=>{m(D.v.getAll()),m(R.$.getAll()),console.log(d)}),[]);const h=(0,i.v9)((e=>e.series.data)),x=(0,i.v9)((e=>e.standard.data)),{name:g,email:p,contact:f,series:j,standard:Z,address:b}=d;let C={name:g,email:p,contact:f,series:h&&h.length>0&&h.filter((e=>e.name===j))[0],standard:x&&x.length>0&&x.filter((e=>e.name===Z))[0],address:b};console.log(C);const y=localStorage.getItem("key_for_access"),v=function(e,l){const s=G().AES.decrypt(e,l).toString(G().enc.Utf8);return console.log(s),JSON.parse(s)}(localStorage.getItem("access_role_data"),y);(0,t.useEffect)((()=>{console.log(c)}),[c]),(0,t.useEffect)((()=>{console.log(h);const e=v.school_series,l=[...new Set(e.split(", ").map((e=>Number(e.split("|-|")[0]))))];u(h&&h.length>0&&h.filter((e=>l.includes(e.id))))}),[h]),(0,t.useEffect)((()=>{console.log(x),h&&h.length>0&&x&&x.length>0&&(C={name:g,email:p,contact:f,series:h.filter((e=>e.name===j))[0],standard:x.filter((e=>e.name===Z))[0],address:b})}),[h,x]),(0,t.useEffect)((()=>{console.log(r)}),[r]);const w=J.Ry().shape({name:J.Z_().required("Name is required"),series:J.Z_().required("Series is required"),standard:J.Z_().required("Standard is required"),contact:J.Z_().matches(/^\d{10}$/,"Phone number is not valid").test("contact-check","Contact Already Exists",(async function(e){return e!==r})).required("Phone number is required"),email:J.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),address:J.Z_().required("Address is required"),series:J.Ry().required("Series is required"),standard:J.Ry().required("Standard is required")});return(0,A.jsxs)(O.Z,{open:l,fullWidth:!0,children:[(0,A.jsx)(N.Z,{className:"flex justify-content-between",children:(0,A.jsxs)(B.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,A.jsx)(B.Z,{padding:"8px",fontSize:18,children:"Are you sure?"}),(0,A.jsx)(S.Z,{onClick:n,children:(0,A.jsx)(H.Z,{})})]})}),h&&x&&c&&h.length>0&&x.length>0&&c.length>0&&(0,A.jsx)($.J9,{initialValues:C,validationSchema:w,onSubmit:e=>{console.log(e),(e=>{console.log(e),s(e)})(e)},children:e=>{let{values:l,handleSubmit:s,errors:t,touched:n,setFieldValue:i}=e;return(0,A.jsxs)($.l0,{onSubmit:e=>{console.log(e),s(e)},children:[(0,A.jsx)(I.Z,{children:(0,A.jsx)(k.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,A.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"name",label:"Name",variant:"outlined",error:n.name&&Boolean(t.name),helperText:n.name&&t.name,onChange:e=>{i("name",e.target.value)},fullWidth:!0,defaultValue:l.name,disabled:!0,readOnly:!0})}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"email",label:"Email",variant:"outlined",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,onChange:e=>{i("email",e.target.value)},fullWidth:!0,defaultValue:l.email,disabled:!0,readOnly:!0})}),(0,A.jsxs)(a.ZP,{item:!0,xs:6,children:[(0,A.jsx)(W.Z,{sx:{color:"red"},children:r&&"Contact Already Exists"}),(0,A.jsx)(o.Z,{name:"contact",label:"Contact",variant:"outlined",error:n.contact&&Boolean(t.contact),helperText:n.contact&&t.contact,onChange:e=>{i("contact",e.target.value),console.log(l)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:l.contact,disabled:!0,readOnly:!0}),c&&null!==c&&c.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Series"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-series",label:"Series",error:n.series&&Boolean(t.series),helperText:n.series&&t.series,onChange:e=>{i("series",e.target.value)},sx:{marginBottom:"16px"},value:c.filter((e=>e.name===l.series.name))[0],disabled:!0,readOnly:!0,children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),c&&c.length>0&&c.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:t.series&&n.series?t.series:""})]}),x&&null!==x&&x.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Standard"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-standard",label:"Standard",error:n.standard&&Boolean(t.standard),helperText:n.standard&&t.standard,onChange:e=>{i("standard",e.target.value)},sx:{marginBottom:"16px"},value:x.filter((e=>e.name===l.standard.name))[0],disabled:!0,readOnly:!0,children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),x&&x.length>0&&x.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:t.standard&&n.standard?t.standard:""})]})]}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",style:{width:"100%"},error:n.address&&Boolean(t.address),helperText:n.address&&t.address,onChange:e=>{i("address",e.target.value)},defaultValue:l.address,disabled:!0,readOnly:!0})})]})})}),(0,A.jsx)(T.Z,{children:(0,A.jsx)(P.Z,{type:"submit",color:"primary",children:"Delete"})})]})}})]})}function Q(e){let{isOpen:l,onClose:s,onCloseEmpty:n,errorContact:r,editModalData:d}=e;const[c,u]=(0,t.useState)([]),m=(0,i.I0)();(0,t.useLayoutEffect)((()=>{m(D.v.getAll()),m(R.$.getAll()),console.log(d)}),[]);const h=(0,i.v9)((e=>e.series.data)),x=(0,i.v9)((e=>e.standard.data)),{name:g,email:p,contact:f,series:j,standard:Z,address:b}=d;let C={name:g,email:p,contact:f,series:h&&h.length>0&&h.filter((e=>e.name===j))[0],standard:x&&x.length>0&&x.filter((e=>e.name===Z))[0],address:b};console.log(C);const y=localStorage.getItem("key_for_access"),v=function(e,l){const s=G().AES.decrypt(e,l).toString(G().enc.Utf8);return console.log(s),JSON.parse(s)}(localStorage.getItem("access_role_data"),y);(0,t.useEffect)((()=>{console.log(c)}),[c]),(0,t.useEffect)((()=>{console.log(h);const e=v.school_series,l=[...new Set(e.split(", ").map((e=>Number(e.split("|-|")[0]))))];u(h&&h.length>0&&h.filter((e=>l.includes(e.id))))}),[h]),(0,t.useEffect)((()=>{console.log(x),h&&h.length>0&&x&&x.length>0&&(C={name:g,email:p,contact:f,series:h.filter((e=>e.name===j))[0],standard:x.filter((e=>e.name===Z))[0],address:b})}),[h,x]),(0,t.useEffect)((()=>{console.log(r)}),[r]);const w=J.Ry().shape({name:J.Z_().required("Name is required"),series:J.Z_().required("Series is required"),standard:J.Z_().required("Standard is required"),contact:J.Z_().matches(/^\d{10}$/,"Phone number is not valid").test("contact-check","Contact Already Exists",(async function(e){return e!==r})).required("Phone number is required"),email:J.Z_().email("Invalid email address").matches(/^[a-zA-Z0-9._%+-]+@gmail\.com$/,"Invalid Gmail address").required("Email is required"),address:J.Z_().required("Address is required"),series:J.Ry().required("Series is required"),standard:J.Ry().required("Standard is required")});return(0,A.jsxs)(O.Z,{open:l,fullWidth:!0,children:[(0,A.jsx)(N.Z,{className:"flex justify-content-between",children:(0,A.jsxs)(B.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,A.jsx)(B.Z,{padding:"8px",fontSize:18,children:"Edit Student"}),(0,A.jsx)(S.Z,{onClick:n,children:(0,A.jsx)(H.Z,{})})]})}),h&&x&&c&&h.length>0&&x.length>0&&c.length>0&&(0,A.jsx)($.J9,{initialValues:C,validationSchema:w,children:e=>{let{values:l,errors:s,touched:t,setFieldValue:n}=e;return(0,A.jsx)($.l0,{onSubmit:e=>{console.log(e)},children:(0,A.jsx)(I.Z,{children:(0,A.jsx)(k.Z,{row:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:(0,A.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"name",label:"Name",variant:"outlined",error:t.name&&Boolean(s.name),helperText:t.name&&s.name,onChange:e=>{n("name",e.target.value)},fullWidth:!0,defaultValue:l.name,disabled:!0,readOnly:!0})}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"email",label:"Email",variant:"outlined",error:t.email&&Boolean(s.email),helperText:t.email&&s.email,onChange:e=>{n("email",e.target.value)},fullWidth:!0,defaultValue:l.email,disabled:!0,readOnly:!0})}),(0,A.jsxs)(a.ZP,{item:!0,xs:6,children:[(0,A.jsx)(W.Z,{sx:{color:"red"},children:r&&"Contact Already Exists"}),(0,A.jsx)(o.Z,{name:"contact",label:"Contact",variant:"outlined",error:t.contact&&Boolean(s.contact),helperText:t.contact&&s.contact,onChange:e=>{n("contact",e.target.value),console.log(l)},fullWidth:!0,inputProps:{maxLength:10},sx:{marginBottom:"16px"},defaultValue:l.contact,disabled:!0,readOnly:!0}),c&&null!==c&&c.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Series"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-series",label:"Series",error:t.series&&Boolean(s.series),helperText:t.series&&s.series,onChange:e=>{n("series",e.target.value)},sx:{marginBottom:"16px"},value:c.filter((e=>e.name===l.series.name))[0],disabled:!0,readOnly:!0,children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),c&&c.length>0&&c.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:s.series&&t.series?s.series:""})]}),x&&null!==x&&x.length>0&&(0,A.jsxs)(z.Z,{fullWidth:!0,children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-label",children:"Standard"}),(0,A.jsxs)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-standard",label:"Standard",error:t.standard&&Boolean(s.standard),helperText:t.standard&&s.standard,onChange:e=>{n("standard",e.target.value)},sx:{marginBottom:"16px"},value:x.filter((e=>e.name===l.standard.name))[0],disabled:!0,readOnly:!0,children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"None"})}),x&&x.length>0&&x.map((e=>(0,A.jsx)(M.Z,{value:e,children:e.name})))]}),(0,A.jsx)(W.Z,{sx:{color:"red"},children:s.standard&&t.standard?s.standard:""})]})]}),(0,A.jsx)(a.ZP,{item:!0,xs:6,children:(0,A.jsx)(o.Z,{name:"address",label:"Address",multiline:!0,rows:6,placeholder:"Address",style:{width:"100%"},error:t.address&&Boolean(s.address),helperText:t.address&&s.address,onChange:e=>{n("address",e.target.value)},defaultValue:l.address,disabled:!0,readOnly:!0})})]})})})})}})]})}var Y=s(1979),ee=s(1701),le=s(3967),se=s(9504),te=s(4721);(0,Y.Z)({palette:{primary:{main:"#673ab7"},secondary:{main:"rgb(33, 150, 243)"}}});const ae=function(){const e=(0,le.Z)(),[l,s]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1),[g,p]=(0,t.useState)(""),[f,j]=(0,t.useState)({}),[Z]=(0,r.Ad)(),{darkMode:b}=Z,[w,E]=(0,t.useState)(""),[q,P]=(0,t.useState)(!1),[O,T]=(0,t.useState)(""),[I,N]=(0,t.useState)(""),B=localStorage.getItem("key_for_access"),k=function(e,l){const s=G().AES.decrypt(e,l).toString(G().enc.Utf8);return console.log(s),JSON.parse(s)}(localStorage.getItem("access_role_data"),B).id;console.log(k),(0,t.useEffect)((()=>{}),[]);const W=(0,i.I0)();(0,t.useLayoutEffect)((()=>{W(d.P.getAll())}),[]);const D=(0,i.v9)((e=>e.student.data));(0,t.useEffect)((()=>{console.log(D)}),[D]);const R=(0,t.useMemo)((()=>{if(console.log(w),""===w.trim())return;console.log(D);const e=D.filter((e=>(e.name.toLowerCase().includes(w.trim().toLowerCase())||e.series.concat(" ").toLowerCase().includes(w.trim().toLowerCase())||e.standard.concat(" ").toLowerCase().includes(w.trim().toLowerCase())||e.contact.concat(" ").toLowerCase().includes(w.trim().toLowerCase()))&&e.school===Number(k)));return console.log(e),e}),[w,D]),H=t.useRef(null),$=(0,t.useCallback)((()=>{s(!0),p("add")})),J=(0,t.useCallback)((e=>{s(!0),p("edit"),j(e)})),U=(0,t.useCallback)((e=>{s(!0),p("view"),j(e)})),Y=(0,t.useCallback)((e=>{s(!0),p("delete"),j(e)})),ae=(0,t.useCallback)((()=>{s(!1),p(""),j({})}));(0,t.useEffect)((()=>{console.log(O)}),[O]),(0,t.useEffect)((()=>{console.log(I)}),[I]);const ne=(0,t.useCallback)((e=>{var l;console.log(e.target.value,H,H.current),null===(l=H.current)||void 0===l||l.focus(),E(e.target.value)}));return(0,A.jsxs)(ee.Z,{theme:e,children:[(0,A.jsx)(u.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:h,children:(0,A.jsx)(m.Z,{color:"inherit"})}),l&&"add"===g?(0,A.jsx)(F,{isOpen:l,onClose:async(e,l)=>{x(!0),console.log(e);try{const l=await c.Z.post("".concat("https://infopublisher.in:5000","/student/submit-form"),{...e},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(l.data),"Contact already exists"===l.data?T(e.contact):(T(""),s(!1),p(""),W(d.P.getAll()))}catch(t){console.error(t)}finally{x(!1)}},onCloseEmpty:ae,errorContact:O}):null,l&&"edit"===g?(0,A.jsx)(X,{isOpen:l,onClose:async(e,l)=>{x(!0),console.log(e,f,l);try{const l=await c.Z.post("".concat("https://infopublisher.in:5000","/student/submit-edit-form"),{...f,...e},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(l.data),"Contact already exists"===l.data?N(e.contact):(N(""),s(!1),p(""),j({}),W(d.P.getAll()))}catch(t){console.error(t)}finally{x(!1)}},onCloseEmpty:ae,editModalData:f,errorContact:I}):null,l&&"view"===g?(0,A.jsx)(Q,{isOpen:l,onCloseEmpty:ae,editModalData:f}):null,l&&"delete"===g?(0,A.jsx)(K,{isOpen:l,onClose:async e=>{x(!0),console.log(e,f);try{const l=await c.Z.post("".concat("https://infopublisher.in:5000","/student/submit-delete-form"),{...f,...e},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://app.infopublisher.in","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Access-Control-Allow-Headers":"Access-Control-Allow-Headers, Access-Control-Allow-Methods, Access-Control-Allow-Origin, Access-Control-Allow-Credentials, Origin, X-Requested-With, Content-Type, Accept, Authorization, access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,content-type","Access-Control-Allow-Credentials":"true"}});console.log(l.data),"Contact already exists"===l.data?N(e.contact):(N(""),s(!1),p(""),j({}),W(d.P.getAll()))}catch(l){console.error(l)}finally{x(!1)}},onCloseEmpty:ae,editModalData:f}):null,(0,A.jsx)(a.ZP,{children:(0,A.jsxs)(n.Z,{sx:{boxShadow:"none"},children:[(0,A.jsx)(se.Z,{children:(0,A.jsxs)(a.ZP,{variant:"gradient",bgcolor:"info",borderRadius:"lg",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,A.jsx)(C.Z,{variant:"h3",fontWeight:500,color:"primary",children:"Student List"}),(0,A.jsxs)(a.ZP,{size:"small",component:"form",sx:{p:"2px 0px",display:"flex",alignItems:"center"},children:[q?(0,A.jsx)(o.Z,{sx:{ml:1,flex:1},size:"small",placeholder:"Search this table...",inputProps:{"aria-label":"search this table..."},autoFocus:!0,value:w,onChange:ne,variant:"standard",label:"Search"}):null,(0,A.jsx)(y.Z,{title:"Search...",placement:"top",children:(0,A.jsx)(S.Z,{color:"primary",type:"button","aria-label":"search",onClick:()=>{P((e=>!e))},children:(0,A.jsx)(v.jVj,{size:"24px"})})}),(0,A.jsx)(y.Z,{title:"Add Student",placement:"top",children:(0,A.jsx)(S.Z,{color:"secondary","aria-label":"add",onClick:$,children:(0,A.jsx)(v.SC9,{size:"27px"})})}),(0,A.jsx)(y.Z,{title:"Select Standard",placement:"top",children:(0,A.jsxs)(z.Z,{sx:{m:1,minWidth:150},children:[(0,A.jsx)(V.Z,{id:"demo-simple-select-standard-label",children:"Select Standard"}),(0,A.jsxs)(L.Z,{value:w,label:"select-standard",onChange:e=>(e=>{console.log(e.target.value),E(e.target.value)})(e),placeholder:"",children:[(0,A.jsx)(M.Z,{value:"",children:(0,A.jsx)("em",{children:"Reset"})}),D&&[...new Set(D.map((e=>e.standard)))].map((e=>(0,A.jsx)(M.Z,{value:e,children:e})))]})]})})]})]})}),(0,A.jsx)(te.Z,{}),(0,A.jsx)(_,{filtereddata:R,onOpenEditModal:J,onOpenDeleteModal:Y,onOpenViewModal:U})]})})]})}}}]);
//# sourceMappingURL=45.2dd3c102.chunk.js.map